# **_Interactive Urinal Device Project_**

**_Author： Zhentao Lu_**

**_02/2015-03/2016_**

**_Copyright belongs to the author_**
***
# Contents
# [Preface](https://github.com/lvzt/Mens-toilet-interactive-device-project-EN#preface-1)
# [1. Define the problem](https://github.com/lvzt/Mens-toilet-interactive-device-project-EN#1-define-the-problem-1)
## [a) Define the project](https://github.com/lvzt/Mens-toilet-interactive-device-project-EN#a-define-the-project-1)
### [i. Select the project](https://github.com/lvzt/Mens-toilet-interactive-device-project-EN#i-select-the-project-1)
### [ii. Sketch the concept](https://github.com/lvzt/Mens-toilet-interactive-device-project-EN#ii-sketch-the-concept-1)
### [iii. Define and tailor the process](https://github.com/lvzt/Mens-toilet-interactive-device-project-EN#iii-define-and-tailor-the-process-1)
### [iv. Define the owner, the customer and the user](https://github.com/lvzt/Mens-toilet-interactive-device-project-EN#iv-define-the-owner,-the-customer-and-the-user-1)
### [v. Write a mission statement](https://github.com/lvzt/Mens-toilet-interactive-device-project-EN#v-write-a-mission-statement-1)
## [b) Define the context](https://github.com/lvzt/Mens-toilet-interactive-device-project-EN#b-define-the-context-1)
### [i. Define the system boundary](https://github.com/lvzt/Mens-toilet-interactive-device-project-EN#i-define-the-system-boundary-1)
### [ii. Document the context of the system](https://github.com/lvzt/Mens-toilet-interactive-device-project-EN#ii-document-the-context-of-the-system-1)
### [iii. Study the current context](https://github.com/lvzt/Mens-toilet-interactive-device-project-EN#iii-study-the-current-context-1)
### [iv. Collect customer comments](https://github.com/lvzt/Mens-toilet-interactive-device-project-EN#iv-collect-customer-comments-1)
### [v. Summarize the project (product) objectives](https://github.com/lvzt/Mens-toilet-interactive-device-project-EN#v-summarize-the-projectproduct-objectives)
## [c) Define functional requirements](https://github.com/lvzt/Mens-toilet-interactive-device-project-EN#c-define-functional-requirements-1)
### [i. Collect use cases](https://github.com/lvzt/Mens-toilet-interactive-device-project-EN#i-collect-use-cases-1)
### [ii. Prioritize use cases](https://github.com/lvzt/Mens-toilet-interactive-device-project-EN#ii-prioritize-use-cases-1)
### [iii. Describe use case behaviours](https://github.com/lvzt/Mens-toilet-interactive-device-project-EN#iii-describe-use-case-behaviours-1)
### [iv. Summarize functional requirements from use cases](https://github.com/lvzt/Mens-toilet-interactive-device-project-EN#iv-summarize-functional-requirements-from-use-cases-1)
### [v. Repeat for secondary use cases](https://github.com/lvzt/Mens-toilet-interactive-device-project-EN#v-repeat-for-secondary-use-cases-1)
### [vi. Finalize requirements](https://github.com/lvzt/Mens-toilet-interactive-device-project-EN#vi-finalize-requirements-1)
# [2. Measurement the need and set targets](https://github.com/lvzt/Mens-toilet-interactive-device-project-EN#2-measurement-the-need-and-set-targets-1)
## [a) Measure the need](https://github.com/lvzt/Mens-toilet-interactive-device-project-EN#a-measure-the-need-1)
### [i. Determine measure of effectiveness](https://github.com/lvzt/Mens-toilet-interactive-device-project-EN#i-determine-measure-of-effectiveness-1)
### [ii. Apply the Goal-Question-Metric method](https://github.com/lvzt/Mens-toilet-interactive-device-project-EN#ii-apply-the-goal-question-metric-method-1)
#### [1. Identify the goals of the measurement](https://github.com/lvzt/Mens-toilet-interactive-device-project-EN#1-identify-the-goals-of-the-measurement-1)
#### [2. Refine the goals with questions](https://github.com/lvzt/Mens-toilet-interactive-device-project-EN#2-refine-the-goals-with-questions-1)
#### [3. Specify the metrics](https://github.com/lvzt/Mens-toilet-interactive-device-project-EN#3-specify-the-metrics-1)
#### [4. Develop Data collection methods](https://github.com/lvzt/Mens-toilet-interactive-device-project-EN#4-develop-data-collection-methods-1)
### [iii. Weigh the product objectives](https://github.com/lvzt/Mens-toilet-interactive-device-project-EN#iii-weigh-the-product-objectives-1)
### [iv. Benchmark competition on measures of effectiveness](https://github.com/lvzt/Mens-toilet-interactive-device-project-EN#iv-benchmark-competition-on-measures-of-effectiveness-1)
## [b) Translate to technical requirements](https://github.com/lvzt/Mens-toilet-interactive-device-project-EN#b-translate-to-technical-requirements-1)
### [i. The house of quality](https://github.com/lvzt/Mens-toilet-interactive-device-project-EN#i-the-house-of-quality-1)
#### [1. Identify engineering characteristics](https://github.com/lvzt/Mens-toilet-interactive-device-project-EN#1-identify-engineering-characteristics-1)
#### [2. Map engineering characteristics to customer attributes](https://github.com/lvzt/Mens-toilet-interactive-device-project-EN#2-map-engineering-characteristics-to-customer-attributes-1)
#### [3. Document engineering interrelationships](https://github.com/lvzt/Mens-toilet-interactive-device-project-EN#3-document-engineering-interrelationships-1)
#### [4. Identify units of measure and benchmark competitions](https://github.com/lvzt/Mens-toilet-interactive-device-project-EN#4-identify-units-of-measure-and-benchmark-competitions-1)
#### [5. Determine target technical performance measure](https://github.com/lvzt/Mens-toilet-interactive-device-project-EN#5-determine-target-technical-performance-measure-1)
### [ii. Collect and rationalize system-level requirements](https://github.com/lvzt/Mens-toilet-interactive-device-project-EN#ii-collect-and-rationalize-system-level-requirements-1)
## [c) Identify the customer value proposition](https://github.com/lvzt/Mens-toilet-interactive-device-project-EN#c-identify-the-customer-value-proposition-1)
# [3. Explore the design space](https://github.com/lvzt/Mens-toilet-interactive-device-project-EN#3-explore-the-design-space-1)
## [a) Discover concepts](https://github.com/lvzt/Mens-toilet-interactive-device-project-EN#a-discover-concepts-1)
### [i. Clarify the problem and decompose the functions](https://github.com/lvzt/Mens-toilet-interactive-device-project-EN#i-clarify-the-problem-and-decompose-the-functions-1)
### [ii. Brainstorm and research](https://github.com/lvzt/Mens-toilet-interactive-device-project-EN#ii-brainstorm-and-research-1)
### [iii. Organize concept fragments](https://github.com/lvzt/Mens-toilet-interactive-device-project-EN#iii-organize-concept-fragments-1)
### [iv. Prune and expand](https://github.com/lvzt/Mens-toilet-interactive-device-project-EN#iv-prune-and-expand-1)
## [b) Explore concepts](https://github.com/lvzt/Mens-toilet-interactive-device-project-EN#b-explore-concepts-1)
### [i. Combine concept fragments](https://github.com/lvzt/Mens-toilet-interactive-device-project-EN#i-combine-concept-fragments-1)
### [ii. Generate integrated concepts](https://github.com/lvzt/Mens-toilet-interactive-device-project-EN#ii-generate-integrated-concepts-1)
## [c) Identify subsystem](https://github.com/lvzt/Mens-toilet-interactive-device-project-EN#c-identify-subsystem-1)
# [4. Optimize design choices](https://github.com/lvzt/Mens-toilet-interactive-device-project-EN#4-optimize-design-choices-1)
## [a) Select concepts](https://github.com/lvzt/Mens-toilet-interactive-device-project-EN#a-select-concepts-1)
### [i. Identify alternatives](https://github.com/lvzt/Mens-toilet-interactive-device-project-EN#i-identify-alternatives-1)
### [ii. Identify attributes](https://github.com/lvzt/Mens-toilet-interactive-device-project-EN#ii-identify-attributes-1)
### [iii. Screen the alternatives](https://github.com/lvzt/Mens-toilet-interactive-device-project-EN#iii-screen-the-alternatives-1)
### [iv. Rate alternatives](https://github.com/lvzt/Mens-toilet-interactive-device-project-EN#iv-rate-alternatives-1)
### [v. Weigh the attributes](https://github.com/lvzt/Mens-toilet-interactive-device-project-EN#v-weigh-the-attributes-1)
### [vi. Calculate weight and sort](https://github.com/lvzt/Mens-toilet-interactive-device-project-EN#vi-calculate-weight-and-sort-1)
### [vii. Score and select alternatives](https://github.com/lvzt/Mens-toilet-interactive-device-project-EN#vii-score-and-select-alternatives-1)
## [b) Optimize parameters](https://github.com/lvzt/Mens-toilet-interactive-device-project-EN#b-optimize-parameters-1)
### [i. Define the product family](https://github.com/lvzt/Mens-toilet-interactive-device-project-EN#i-define-the-product-family-1)
# [5. Develop the architecture](https://github.com/lvzt/Mens-toilet-interactive-device-project-EN#5-develop-the-architecture-1)
## [a) Design the behaviour](https://github.com/lvzt/Mens-toilet-interactive-device-project-EN#a-design-the-behaviour-1)
### [i. Review use cases, context, and functional requirements](https://github.com/lvzt/Mens-toilet-interactive-device-project-EN#i-review-use-cases-context-and-functional-requirements-1)
### [ii. Map behaviours to subsystems](https://github.com/lvzt/Mens-toilet-interactive-device-project-EN#ii-map-behaviours-to-subsystems-1)
### [iii. Identify messages, triggers, and interfaces](https://github.com/lvzt/Mens-toilet-interactive-device-project-EN#iii-identify-messages-triggers-and-interfaces-1)
### [iv. Identify system states](https://github.com/lvzt/Mens-toilet-interactive-device-project-EN#iv-identify-system-states-1)
### [v. Set targets for behaviour](https://github.com/lvzt/Mens-toilet-interactive-device-project-EN#v-set-targets-for-behaviour-1)
### [vi. Extract functional requirements to originating requirements](https://github.com/lvzt/Mens-toilet-interactive-device-project-EN#vi-extract-functional-requirements-to-originating-requirements-1)
### [vii. Trace-derived requirements to originating requirements](https://github.com/lvzt/Mens-toilet-interactive-device-project-EN#vii-trace-derived-requirements-to-originating-requirements-1)
### [viii. The centrality of the operational description template](https://github.com/lvzt/Mens-toilet-interactive-device-project-EN#viii-the-centrality-of-the-operational-description-template-1)
## [b) Design the flow and control](https://github.com/lvzt/Mens-toilet-interactive-device-project-EN#b-design-the-flow-and-control-1)
### [i. Identify functional relationships](https://github.com/lvzt/Mens-toilet-interactive-device-project-EN#i-identify-functional-relationships-1)
### [ii. Summarize state changes](https://github.com/lvzt/Mens-toilet-interactive-device-project-EN#ii-summarize-state-changes-1)
## [c) Design the structure](https://github.com/lvzt/Mens-toilet-interactive-device-project-EN#c-design-the-structure-1)
### [i. Identify interfaces and finalize subsystems](https://github.com/lvzt/Mens-toilet-interactive-device-project-EN#i-identify-interfaces-and-finalize-subsystems-1)
### [ii. Document links](https://github.com/lvzt/Mens-toilet-interactive-device-project-EN#ii-document-links-1)
### [iii. Identify emergent interactions](https://github.com/lvzt/Mens-toilet-interactive-device-project-EN#iii-identify-emergent-interactions-1)
### [iv. Sketch a design concept](https://github.com/lvzt/Mens-toilet-interactive-device-project-EN#iv-sketch-a-design-concept-1)
### [v. Create a rough-cut bill of materials](https://github.com/lvzt/Mens-toilet-interactive-device-project-EN#v-create-a-rough-cut-bill-of-materials-1)
### [vi. Allocate target technical performance measure to subsystem](https://github.com/lvzt/Mens-toilet-interactive-device-project-EN#vi-allocate-target-technical-performance-measure-to-subsystem-1)
# [6. Validate the design](https://github.com/lvzt/Mens-toilet-interactive-device-project-EN#6-validate-the-design-1)
## [a) Verify requirements](https://github.com/lvzt/Mens-toilet-interactive-device-project-EN#a-verify-requirements-1)
### [i. Conduct design reviews](https://github.com/lvzt/Mens-toilet-interactive-device-project-EN#i-conduct-design-reviews-1)
#### [1. Determine if entry criteria are met](https://github.com/lvzt/Mens-toilet-interactive-device-project-EN#1-determine-if-entry-criteria-are-met-1)
#### [2. Schedule the review meeting](https://github.com/lvzt/Mens-toilet-interactive-device-project-EN#2-schedule-the-review-meeting-1)
#### [3. Present the design](https://github.com/lvzt/Mens-toilet-interactive-device-project-EN#3-present-the-design-1)
#### [4. Collect review panel comments](https://github.com/lvzt/Mens-toilet-interactive-device-project-EN#4-collect-review-panel-comments-1)
#### [5. Use exit criteria to assess whether the review was passed](https://github.com/lvzt/Mens-toilet-interactive-device-project-EN#5-use-exit-criteria-to-assess-whether-the-review-was-passed-1)
#### [6. Reschedule if the review did not pass](https://github.com/lvzt/Mens-toilet-interactive-device-project-EN#6-reschedule-if-the-review-did-not-pass-1)
### [ii. Develop the test plan](https://github.com/lvzt/Mens-toilet-interactive-device-project-EN#ii-develop-the-test-plan-1)
#### [1. Identify behavioural test sequence](https://github.com/lvzt/Mens-toilet-interactive-device-project-EN#1-identify-behavioural-test-sequence-1)
#### [2. Develop behavioural test methodology](https://github.com/lvzt/Mens-toilet-interactive-device-project-EN#2-develop-behavioural-test-methodology-1)
#### [3. Repeat for nonbehavioural tests](https://github.com/lvzt/Mens-toilet-interactive-device-project-EN#3-repeat-for-nonbehavioural-tests-1)
#### [4. Map test activities to system requirements](https://github.com/lvzt/Mens-toilet-interactive-device-project-EN#4-map-test-activities-to-system-requirements-1)
## [b) Manage risks](https://github.com/lvzt/Mens-toilet-interactive-device-project-EN#b-manage-risks-1)
### [i. Conduct failure modes and effects analysis](https://github.com/lvzt/Mens-toilet-interactive-device-project-EN#i-conduct-failure-modes-and-effects-analysis-1)
#### [1. Select functions](https://github.com/lvzt/Mens-toilet-interactive-device-project-EN#1-select-functions-1)
#### [2. Identify failure modes](https://github.com/lvzt/Mens-toilet-interactive-device-project-EN#2-Identify-failure-modes-1)
#### [3. Assess potential impact of failure](https://github.com/lvzt/Mens-toilet-interactive-device-project-EN#3-Assess-potential-impact-of-failure-1)
#### [4. Brainstorm possible causes](https://github.com/lvzt/Mens-toilet-interactive-device-project-EN#4-Brainstorm-possible-causes-1)
#### [5. Suggest corrective actions](https://github.com/lvzt/Mens-toilet-interactive-device-project-EN#5-Suggest-corrective-actions-1)
#### [6. Rate the severity of impact](https://github.com/lvzt/Mens-toilet-interactive-device-project-EN#6-Rate-the-severity-of-impact-1)
#### [7. Rate the likelihood of causal occurrence](https://github.com/lvzt/Mens-toilet-interactive-device-project-EN#7-rate-the-likelihood-of-causal-occurrence-1)
#### [8. Assess the risks](https://github.com/lvzt/Mens-toilet-interactive-device-project-EN#8-assess-the-risks-1)
#### [9. Prioritize the action](https://github.com/lvzt/Mens-toilet-interactive-device-project-EN#9-prioritize-the-action-1)
# [7. Execute the design](https://github.com/lvzt/Mens-toilet-interactive-device-project-EN#7-execute-the-design-1)
## [a) Schedule the project and track progress](https://github.com/lvzt/Mens-toilet-interactive-device-project-EN#a-schedule-the-project-and-track-progress-1)
### [i. Develop the task list (work breakdown structure)](https://github.com/lvzt/Mens-toilet-interactive-device-project-EN#i-develop-the-task-list-work-breakdown-structure-1)
### [ii. Estimate durations](https://github.com/lvzt/Mens-toilet-interactive-device-project-EN#ii-estimate-durations-1)
### [iii. Task percent complete](https://github.com/lvzt/Mens-toilet-interactive-device-project-EN#iii-task-percent-complete-1)
### [iv. Identify task inputs, outputs, and deliverables](https://github.com/lvzt/Mens-toilet-interactive-device-project-EN#iv-identify-task-inputs-outputs-and-deliverables-1)
### [v. Establish task precedence relationships](https://github.com/lvzt/Mens-toilet-interactive-device-project-EN#v-establish-task-precedence-relationships-1)
### [vi. Schedule the project](https://github.com/lvzt/Mens-toilet-interactive-device-project-EN#vi-schedule-the-project-1)
### [vii. Display a Gantt chart](https://github.com/lvzt/Mens-toilet-interactive-device-project-EN#vii-display-a-gantt-chart-1)
### [viii. Adjust the schedule for team availability](https://github.com/lvzt/Mens-toilet-interactive-device-project-EN#viii-adjust-the-schedule-for-team-availability-1)
## [b) Conduct management reviews](https://github.com/lvzt/Mens-toilet-interactive-device-project-EN#b-conduct-management-reviews-1)
# [8. Iterate the design process](https://github.com/lvzt/Mens-toilet-interactive-device-project-EN#8-iterate-the-design-process-1)
## [a) Iterate until feasible](https://github.com/lvzt/Mens-toilet-interactive-device-project-EN#a-iterate-until-feasible-1)
### [i. Backtracking strategies](https://github.com/lvzt/Mens-toilet-interactive-device-project-EN#i-backtracking-strategies-1)
## [b) Iterate with improvement](https://github.com/lvzt/Mens-toilet-interactive-device-project-EN#b-iterate-with-improvement-1)
## [c) Iterate by level](https://github.com/lvzt/Mens-toilet-interactive-device-project-EN#c-iterate-by-level-1)
### [i. Level-by-level decomposition: the Vee diagram](https://github.com/lvzt/Mens-toilet-interactive-device-project-EN#i-level-by-level-decomposition-the-vee-diagram-1)
#### [1. Detail functions into behaviours](https://github.com/lvzt/Mens-toilet-interactive-device-project-EN#1-detail-functions-into-behaviours-1)
#### [2. Allocate nonbehavioural requirements: linked houses of quality](https://github.com/lvzt/Mens-toilet-interactive-device-project-EN#2-allocate-nonbehavioural-requirements:-linked-houses-of-quality-1)
#### [3. Maintain hierarchies and traceabilities](https://github.com/lvzt/Mens-toilet-interactive-device-project-EN#3-maintain-hierarchies-and-traceabilities-1)
## [d) Dive and surface: a system view](https://github.com/lvzt/Mens-toilet-interactive-device-project-EN#d-dive-and-surface-a-system-view-1)
### [Appendix 1 IBM Rational Rhapsody - Design black box system model](https://github.com/lvzt/Mens-toilet-interactive-device-project-EN#appendix-1-ibm-rational-rhapsody---design-black-box-system-model-1)
### [Appendix 2 IBM Rational Rhapsody - Design white box system model](https://github.com/lvzt/Mens-toilet-interactive-device-project-EN#appendix-2-ibm-rational-rhapsody---design-white-box-system-model-1)



# Preface
This project is based on the process described in the book - Getting Design Right. The author of the book, Dr. Peter L. Jackson, is the professor in School of Operations Research and Information Engineering in Cornell University. This project uses similar terminology as in the book. Readers should focus on the essence of the design, rather than specific terms. 

![](https://github.com/lvzt/Mens-toilet-interactive-device-project-EN/blob/master/Image/preface.jpg)

This project involves eight stages – define, measurement, explore, optimize, develop, validate, execute and iterate.

![](https://github.com/lvzt/Mens-toilet-interactive-device-project-EN/blob/master/Image/8steps.jpg)

The presented template shows the process of product design and management. As an example, it may not represent a delicate engineering design. Instead, it’s focusing on pre-engineering design and post-engineering test. The traditional “Vee” model clearly indicates two parts of the procedure, the design stage, the manufacture stage, and the assembly and test stage. According to the Vee model, while the project is progressing from the upper left towards the bottom, the design becomes optimized with its details completed. When it progressing further from the bottom towards the upper right, tests are preformed to verify the design at different stages.

# 1. Define the problem
## a) Define the project
### i. Select the project

Starting with an idea. That could be a problem you want to solve. It will lead you to look for possible solutions. The idea can be a solution as well. Then you should think about the problem that the solution can solve, and think about other possible solutions. Alternatively, it can be an idea of making something interesting. In this case, appealing is the feature to be considered through the process. 

To illustrate the procedure with an example, here we develop a Interactive urinal device. 

### ii. Sketch the concept

The best way to show your idea is to present it with a schematic drawing. It may be scratched on one piece of paper, which does not contain much details and can be presented conveniently.

The gaming device we are designing can be installed in toilets in shopping malls. Game will start when a costumer is using the urinal. Advertisement will be displayed when it is idle. 

![](https://github.com/lvzt/Mens-toilet-interactive-device-project-EN/blob/master/Image/Toilet.jpg)

### iii. Define and tailor the process

Depending on your time and budget, you need to find the balance between how much resource spending on scheduling, and how much on performing. You may consider skipping part of the procedure presented here, but please note that it should be done with caution. This procedure is developed by many professionals based on decades of practice. Therefore tailoring the procedure requires extensive experience.

### iv. Define the owner, the customer and the user

Base on the relation to the system, there are three type of roles: owner, customer and user. Sometimes these three roles can be represented by the same person, but generally they are different. 
    Owner: sets design goals and authorizes major design decision.
    Customer: purchases the system and prepares for the usage.
    User: actually uses the system.

In our case, the gaming device will be installed in shopping malls,
    Owner: the vendor
    Customer: shopping malls
    User: male adults

### v. Write a mission statement

As the project may be complicated, involving many subsystems, at the beginning it's necessary to write a mission statement to describe the goal of the project. The statement should be expressed in the view of the owner. It should be concise and formal. 

The goal of our project is to design a gaming device installed in toilets in shopping malls for gaming and advertising purpose. 

## b) Define the context

### i. Define the system boundary

Different persons may have different views on the same project, especially the designers. For a project developed by a team, effective communications are essential. For a project developed by many teams, communications may become more difficult. Therefore system boundaries should be defined at the beginning of the process. Within the boundary are internal issues which can be handled by the team; Outside the boundary are external issues which are out of control of the team. If an external issue is related to the project, the team should evaluate its impact; otherwise the team should neglect the issue. When a new event appears, it is necessary to determine whether it is internal, external irrelevant, or external relevant.

For our project the gaming device is installed in toilets. The design is focused on the gaming device. Any toilet related modification is not considered here. 

### ii. Document the context of the system

Now it’s time to think about the relationships between the system we are going to design and the external entities.

#### 1. Context diagram

Using context diagram is a concise way to show the relation between the system and the surroundings. 

![](https://github.com/lvzt/Mens-toilet-interactive-device-project-EN/blob/master/Image/Context%20diagram.png)

The system we are going to design is placed in the center of the drawing. It is surrounded by external entities. Those external entities are linked to the center by lines. Along the line, a sentence is formed by combining the words in the external entity with those in the system. The sentence expresses the relation between the external entity and the system.

#### 2. Context matrices

The sentences generated in the previous section are presented in the table below.

| | Adult Male | Shopping mall | Interactive urinal device | Installation personnel | cleaner |
| --- | --- | --- | --- | --- | --- |
| Adult Male | | | use | | |
| Shopping mall | | | display ad on | | |
| Interactive urinal device | used by | ad displayed on | | installed by | cleaned by |
| Installation personnel | | | install | | |
| Cleaner | | | clean | | | 

### iii. Study the current context

It is important to consider the context in which the system will be used. Therefore it's necessary to visit customers, examine the environment, and collect information. When studying the environment, we should act as the following roles: observer, apprentice and partner. As an observer we just watch the process without changing anything. As an apprentice we should learn the current process and think about the reason of doing it. Sometimes an apprentice can transfer to a questioner. As a partner we need to get involved in the process a little deeper and look for alternative ways to complete the same task. Note that the collected information should be processed afterwards, so that redundant information can be removed.

In our case, the environment is shopping malls. Things worth noticing are
* Children that are under-age may used the toilet.
* People tends to ware more clothes in winter than in summer.

### iv. Collect customer comments

Customer comments may be a good source of information, which can be obtained from surveys, error logs, warranty clauses etc.

For our project customers may concern 
* does the device have good sensitivity?
* is the game fun to play?
* can measures be taken to prevent users playing the game for too long?
* is the device robust? Is it easy to maintenance? 
* can the device receive and display advertisements properly?

### v. Summarize the project(product) objectives

After receiving enough feedback from customers, it’s necessary to process the information and summarize the project objectives. The methods are diving and surfacing. To dive is to focus on details; To Surface is to summarize the details and form an abstract concept. In practice it's better to put related subjects together, combine and summarize them. 

The goal of our project is to design a gaming device installed on toilets in shopping malls, with minimum modification to the environment during the installation. The game should be fun to play. The device should be robust, water-proof, easy to clean and maintenance, having good sensitivity. Measures can be taken to prevent long time occupation of the toilet.

## c) Define functional requirements

Now it's time to document functional requirements of the system. Here we need to figure out what functions the system **shall have**. Note that the requirements are stated using “shall have” instead of “should have”. When defining requirements, we should pay attention not to restrict the design; On the other hand, we should not miss any requirements. “Diving-and-surfacing” method is especially useful here. Collecting low level requirements is not a waste of time, as they can be used in later stages. 

### i. Collect use cases

Use case are examples of different users interacting with the system. Different perspective results in different use cases. It's a good time for the team to brainstorm more use cases

For our project, use cases are listed below,
* an adult male plays the game
* a technician installs the device on the toilet
* a cleaner cleans the toilet
* a shopping mall staff displays advertisements 
* when the toilet is occupied for too long, the game shall cease and a message shall be displayed on the screen to suggest that the user shall finish using the toilet as soon as possible
* a technician fixes the device

Picture is made using IBM Rational Rhapsody
![Use Case](https://github.com/lvzt/Mens-toilet-interactive-device-project-EN/blob/master/Image/01%20UseCase.jpg)

### ii. Prioritize use cases

Normally the team will collect many use cases. It's important to prioritize the use cases according to three levels: high: system behaviours should be described; medium: if time allows, system behaviours should be described; low: no description is necessary.

In our case, the use cases are summarized and sorted, listed in the table below

| Use cases | Priority |
| --- | --- |
| An adult male plays the game | High |
| A technician installs the device on the toilet | Low |
| A cleaner cleans the toilet | Low |
| A shopping mall staff displays advertisements | Medium |
| When the toilet is occupied for too long, the game shall cease and a message shall be displayed on the screen to suggest that the user shall finish using the toilet as soon as possible | High |
| A technician fixes the device | Medium |

### iii. Describe use case behaviours

The table describing use case behaviours contains five parts: name of use cases, initial state of the system, behaviour description, ending status and remarks. Behaviour description can be started from any stage of the system. Details shall be summarized to high level function requirements. The table may contain information about the inner structure of the system, which is only for description purpose. The structure in the actual design may be totally different.

**Name: an adult male plays the game**

**Initial state: the system is idle and displays ad**

| Operator | System |
| --- | --- | 
| An adult male will use the toilet | Interactive urinal device |
| The adult male approaches the toilet | |
| | The system detects human being nearby |
| | The system displays instructions |
| The adult male confirms readiness by sound | |
| | The system detects the sound |
| | The system counts down to start the game |
| The adult male starts to use the toilet | |
| | The system detects fluid |
| | The system starts the game, detects the pressure of the fluid, count the time |
| The adult male finishes using the toilet | |
| | The system shows the result |
| The adult male leaves | |
| | The system displays messages indicating the adult male to leave |

**End state: the system is idle and displays ad** 

The flow diagram designed by using IBM Rational Rhapsody is shown below

![ActivityDiagram_Blackbox](https://github.com/lvzt/Mens-toilet-interactive-device-project-EN/blob/master/Image/02%20ActivityDiagram_Blackbox.jpg)

The details of use cases are illustrated in the background matrix table below

| Is related to | Adult male | Gaming device | Body detector | Sound detector | Fluid detector | Result of the game |
| --- | --- | --- | --- | --- | --- | --- |
| Adult male | | use | is detected by | is detected by | is detected by | sees |
| Gaming device | `is used by` | | `includes` | `includes` | `includes` | `includes` |
| Body detector | `detects` | `is inside` | | | | |
| Sound detector | `detects` | `is inside` | | | | |
| Fluid detector | `detects` | `is inside` | | | | |
| Result of the game | `is seen by` | `is inside` | | | | |

Body, fluid and sound detections are different components of the system. They are here just for description purpose, which may not exist in the actual design.

Cells marked with shadow indicates actions within the system, which can be designed. The rests are out of control of the system.

Similarly we can work out the rest of use cases. System behaviours that have been analyzed will be neglected.

**Name: When the toilet is occupied for too long, the game shall cease and a message shall be displayed on the screen to suggest that the user shall finish using the toilet as soon as possible **

**Initial state: the system shows the result of the game**

| Operator | System |
| --- | --- | 
| An adult is using the toilet | Interactive urinal device |
| The adult male continues occupying the toilet after finish using it | |
| | The system detects that the same person occupying the toilet |
| | The system displays displays a message that suggests the adult male should leave |

**End state: the system is idle and displays ad** 

If new information appears during the analysis, it should be added in the background matrix table. For our case, it remains the same. 

### iv. Summarize functional requirements from use cases	

Based on the analysis, system function requirements are listed below

* The device can display ad when idling
* The device can receive the ad to be displayed
* The device can detect approaching human being
* The device can display game instructions
* The device can detect the sound of human being
* The device can count down to start the game
* The device can detect fluid
* The device can interact with the user based on the pressure and direction of the fluid
* The device can calculate and display the result of the game
* The device can display the message to suggest that the user shall finish using the toilet as soon as possible

### v. Repeat for secondary use cases

We have analysed primary use cases. Secondary use cases, such as the system is overused or malfunctioning shall be analysed and added in the table.

| Use case | Priority |
| --- | --- |
| Primary use case | |
| An adult male plays the game | High |
| A technician installs the device on the toilet | Low |
| A cleaner cleans the toilet | Low |
| A shopping mall staff displays advertisements | Medium |
| When the toilet is occupied for too long, the game shall cease and a message shall be displayed on the screen to suggest that the user shall finish using the toilet as soon as possible | High |
| A technician fixes the device | Medium |
| Secondary use case | |
| The system switches to a power saving mode during night | High |
| The system can wake up automatically in the morning | High |

### vi. Finalize requirements	

Based on the analysis of major and minor use cases, function requirements of the system are listed in the table below

| No. | Requirements | Function name |
| --- | --- | --- |
| OR1 | The device can display ad when idling | Ad display |
| OR2 | The device can receive the ad to be displayed | Message receiving |
| OR3 | The device can detect approaching human being | Body detection |
| OR4 | The device can display game instructions | Instruction display |
| OR5 | The device can detect the sound of human being | Sound detection |
| OR6 | The device can count down to start the game | Countdown |
| OR7 | The device can detect fluid | Fluid detection |
| OR8 | The device can interact with the user based on the pressure and direction of the fluid | Pressure and direction detection |
| OR9 | The device can calculate and display the result of the game | Result display |
| OR10 | The device can display the message to suggest that the user shall finish using the toilet as soon as possible | Leaving message display |
| OR11 | The system switches to a power saving mode during night | Power saving mode |
| OR12 | The system can wake up automatically in the morning | Automatically waking up |

# 2. Measurement the need and set targets	

In this stage, based on the previous analysis, such as customer's feedback, we need to
* measure how well the product satisfying the requirements
* measure the importance of each requirement for the customer
* set technical targets for the product, which can make it more competitive than similar products in the market

## a) Measure the need	

Measure of effectiveness is to evaluate how much the product satisfies the targets. In practice, methods can be used for the evaluation are quantifying customer's requirements, sorting them in order according to their priorities, and developing measurement graph.

### i. Determine measure of effectiveness	

There are many ways to collect data, such as costumer survey. But quantitatively measure the effectiveness is not easy, we use Goal-Question-Metric (GQM) method for gathering the information.

### ii. Apply the Goal-Question-Metric method

#### 1. Identify the goals of the measurement	

To identify the goals of the measurement, we need to work out the following subjects
* the project or procedure to be measured
* the goal of the measurement, such as to understand, control, design or improve 
* the measurement quality of the project or procedure
* the perspective of the measurement
* the context of the measurement

Based on the feedback of customers, the goals for our gaming device are summarized as follows
* the modification to the existing toilet structure shall not be very large
* the device shall be sensitive
* the game shall be interesting 
* the device shall be waterproof
* it shall be easy to clean the device
* the device shall display the message to suggest that the user shall finish using the toilet as soon as possible 
* the device shall be able to switch to power saving mode and wake up automatically
* it shall be easy to maintain the device

Finally, we get the table below

| | Analysis (the project or procedure to be measured) | the goal of the measurement (understand, control, design or improve) | Is related to (Measure the quality of the product) | Perspective (the personal to evaluate the quality or measure the goals) | Context |
| --- | --- | --- | --- | --- | --- |
| the modification to the existing structure | the interactive urinal device | control | structure | installation personal | men's toilet |
| the device shall be sensitive | the interactive urinal device | design | sensitivity | user (adult male) | men's toilet |
| the game shall be interesting  | the interactive urinal device | design | interest | user (adult male) | men's toilet |
| the device shall be waterproof | the interactive urinal device | control | waterproof | installation personal | men's toilet |
| it shall be easy to clean the device | the interactive urinal device | control | cleaning | cleaner | men's toilet |
| the device shall display the message to suggest that the user shall finish using the toilet as soon as possible | the interactive urinal device | control | usage rate | user (adult male) | men's toilet |
| the device shall be able to switch to power saving mode and wake up automatically | the interactive urinal device | design | power saving | customer | men's toilet |
| it shall be easy to maintain the device | the interactive urinal device | design | structure | customer | men's toilet |

#### 2. Refine the goals with questions	

Here we interpret the targets into specific questions. In this way it's very helpful to get a feeling on the mission to be accomplished. 

| Targets | Questions |
| --- | --- |
| the modification to the existing structure | Does the installation require drilling holes on the wall or other mechanical modifications on the existing structure? <br /> How many holes to be drilled? <br /> How big is the affected area? |
| the device shall be sensitive | When someone approaching the toilet, how long it takes the devices to show instructions? <br /> When someone is interacting with the device, how quick will the device react? <br /> After the game is over, how long it takes to show the result? |
| the game shall be interesting | Does the user enjoy the game? <br /> Does he want to play it again? |
| the device shall be waterproof | How long can the device stay in the water while functioning? |
| it shall be easy to clean the device | How long it takes to clean the device? <br /> Will cleaning agents damage the device? |
| the device shall display the message to suggest that the user shall finish using the toilet as soon as possible | the interactive urinal device | Generally, how long will a user occupies the toilet? |
| the device shall be able to switch to power saving mode and wake up automatically | When shall the device switch to power saving mode? <br /> When shall the device wake up? |
| it shall be easy to maintain the device | How long it takes to fix the device? |

#### 3. Specify the metrics	

Considering the trade off between the quality of the information and the required efforts for collecting the data, we have two kinds of metrics for the above questions, the ideal metrics and the practical metrics. The ideal metrics are the results from directly answering the questions based on the collected data. When that is not possible (due to time, cost, or other issues), practical metrics can be applied. Due to the cost, time and viability, sometimes we use rough metrics. 

| Targets | Questions | Ideal metrics | Rough metrics | 
| --- | --- | --- | --- |
| the modification to the existing structure | Does the installation require drilling holes on the wall or other mechanical modifications to the existing structure? <br /> How big is the affected area? | The number of holes to be drilled <br /> The size of the affected area | <br /> The contact area between the device and the toilet |
| the device shall be sensitive | When someone approaching the toilet, how long it takes the devices to show instructions? <br /> When someone is interacting with the device, how quick will the device react? <br /> After the game is over, how long it takes to show the result? | The time between an adult stands in front of the toilet and the device displays gaming instructions <br /> The time between liquid flowing in the toilet and the corresponding reaction on the screen <br /> The time between the interaction stops and the device shows the result | |
| the game shall be interesting | Does the user want to play it again? | The times a user plays the game | The average times 3-5 users play the game |
| the device shall be waterproof | How long can the device stay in the water while functioning? | The time the device can stay in water while functioning | |
| it shall be easy to clean the device | How long it takes to clean the device? <br /> Will cleaning agents damage the device? | The time it takes to clean the device <br /> The amount of cleaning agents that may damage the device | |
| the device shall display the message to suggest that the user shall finish using the toilet as soon as possible | the interactive urinal device | Generally, how long will a user occupies the toilet? | The average time a user occupies the toilet during a day | The average time of 3-5 users occupy the toilet |
| the device shall be able to switch to power saving mode and wake up automatically | When shall the device switch to power saving mode? <br /> When shall the device wake up? | The time the device switches to power saving mode <br /> The time the device wakes up | |
| it shall be easy to maintain the device | How long it takes to fix the device? | The time it takes to fix the device | The time it take to fix mechanical failures <br /> The time it takes to fix electronic failures |

#### 4. Develop Data collection methods	

According to the target-question-metric method, the last step is to develop data collection methods. If it is difficult to collect data, we might consider repeat the previous step and redesign the rough metrics. There are two ways to collect date: for general questions we use costumer survey; and for data requires repeatedly observation, we use the data collection table.

| Targets | Questions | Ideal metrics | Rough metrics | Data collection method |
| --- | --- | --- | --- | --- |
| the modification to the existing structure | Does the installation require drilling holes on the wall or other mechanical modifications to the existing structure? <br /> How big is the affected area? | The number of holes to be drilled <br /> The size of the affected area | <br /> The contact area between the device and the toilet | Estimated from the design <br /> Estimated from the design <br /> Estimated from the design |
| the device shall be sensitive | When someone approaching the toilet, how long it takes the devices to show instructions? <br /> When someone is interacting with the device, how quick will the device react? <br /> After the game is over, how long it takes to show the result? | The time between an adult stands in front of the toilet and the device displays gaming instructions <br /> The time between liquid flowing in the toilet and the corresponding reaction on the screen <br /> The time between the interaction stops and the device shows the result | | Customer survey <br /> Customer survey <br /> Customer survey |
| the game shall be interesting | Does the user want to play it again? | The times a user plays the game | The average times 3-5 users play the game | | Customer survey |
| the device shall be waterproof | How long can the device stay in the water while functioning? | The time the device can stay in water while functioning | | Data collection table |
| it shall be easy to clean the device | How long it takes to clean the device? <br /> Will cleaning agents damage the device? | The time it takes to clean the device <br /> The amount of cleaning agents that may damage the device | | Customer survey <br /> Estimated from the design |
| the device shall display the message to suggest that the user shall finish using the toilet as soon as possible | the interactive urinal device | Generally, how long will a user occupies the toilet? | The average time a user occupies the toilet during a day | The average time of 3-5 users occupy the toilet | Data collection table |
| the device shall be able to switch to power saving mode and wake up automatically | When shall the device switch to power saving mode? <br /> When shall the device wake up? | The time the device switches to power saving mode <br /> The time the device wakes up | | Customer survey <br /> Customer survey |
| it shall be easy to maintain the device | How long it takes to fix the device? | The time it takes to fix the device | The time it take to fix mechanical failures <br /> The time it takes to fix electronic failures | Estimated from the design <br /> Estimated from the design |

When testing the waterproofness of the device, data collected at different time may be listed in the data collection table below,

* Product name:
* Observer's name:
* Time: from _ till _
* Location: 

| No. | Time | Result | Remark |
| --- | --- | --- | --- |
| 1 | | | |
| 2 | | | |
| 3 | | | |

### iii. Weigh the product objectives	

Now it's time to figure out which properties are the most important for customers. As we haven't developed a specific design of the product yet, only the qualitative analysis can be provided at the moment, while the quantitative analysis will be conducted later. When sorting out the product objectives based on their priorities, following issues need to be concerned,

* Is it useful to sort out the product objectives based on their priorities? Is it possible to reach the final decision if results based on quantitative analysis are available?
* Who will perform the sorting? Base on the perspective of which group? The owner? The customer? The user?
* Some of the comparisons are contradictory. Is it necessary to perform comparison based on safety and cost-effectiveness?
* How accurate does the survey reflect the preferences of the respondents? Are the preferences of the respondents in accordance to the product objectives developed by the team? 

The procedure consist of four steps: 
1. Sort the product objectives to different categories according to their similarities
2. Render each category with a weighing factor; The summed weighing factors of each category is 1; The higher the value, the more important the product objective
3. Multiply the priority with the weighing factor
4. Sort the result according to descending order

For our project, there is no similarity between different product objectives, therefore each goal takes its own category

| Modification to the existing structure | Sensitivity | Fun | Waterproof | Easy to clean | Alert message | Power saving | Easy to maintain |
| --- | --- | --- | --- | --- | --- | --- | --- |
| The degree of modification to the existing structure | The device is sensitive and may respond to instructions promptly | The game is fun to play | The device is waterproof | The device is easy to clean | The device may display message to suggest that the user shall finish using the toilet as soon as possible | The device can switch to power-saving mode and wake up automatically | The device is easy to maintain |

![](/Image/Weigh%20the%20product%20objectives.jpg)

The sorted product targets are

| Product target | Priority | Level |
| --- | --- | --- |
| Waterproof | 0.2 | 1 |
| The effort required to modify the structure | 0.1 | 2 |
| During the game sensitivity | 0.1 | 2 |
| It's fun to play the game | 0.1 | 2 | 
| Display alert message when the game is over | 0.1 | 2 | 
| Pregame sensitivity | 0.075 | 6 | 
| Postgame sensitivity | 0.075 | 6 |
| The time it takes to clean the device | 0.06 | 8 | 
| The area of modification to the existing structure | 0.05 | 9 |
| Easy to maintain | 0.05 | 9 |
| The robustness of the device against cleaning agents | 0.04 | 11 |
| Switch to power saving mode during the night automatically | 0.025 | 12 |
| Wake up during the day automatically | 0.025 | 12 |

The pie chart of the results

![](https://github.com/lvzt/Mens-toilet-interactive-device-project-EN/blob/master/Image/16%20Pie%20chart.jpg)

### iv. Benchmark competition on measures of effectiveness	

Next we study the existing product in the market. The product developed by SEGA, by companies in India and London are displayed,

![](https://github.com/lvzt/Mens-toilet-interactive-device-project-EN/blob/master/Image/three%20product.jpg)

In the table below an evaluation of the three products are presented

| | SEGA | India | London |
| --- | --- | --- | --- |
| Price | Hardware 140,000 Yen <br /> Sotware 10,000 Yen | Unknown | Unknown |
| Recommended user age | Older than 10 years | Adult | Adult |
| Material | Ceramic | Ceramic | Ceramic | 
| Touch control | Single point | Half urinal | Multiple points |
| Game | 2D games | Unknown | 2D and 3D games | 
| Date of the report released | Oct 2011 | Jan 2014 | Nov 2011 |

Evaluation of the three products (1-5, higher score represents better performance)

| | SEGA | India | London |
| --- | --- | --- | --- |
| Appearance | 4 | 2 | 4 |
| Touch control | 3 | 5 | 4 |
| Game | 3 | 2 | 4 |
| Modification to the existing structure | 4 | 2 | 3 |
| Price | 4 | 3 | 2 |

Displayed in chart

![](https://github.com/lvzt/Mens-toilet-interactive-device-project-EN/blob/master/Image/17%20Radar%20chart.jpg)

## b) Translate to technical requirements	

The next step is to translate the product objectives to engineering characteristics, and set norms to evaluate those characteristics. As there might be mismatches between the perspective of customers and engineers, extensive communication is more than important. 

### i. The house of quality	

One way to facilitate effective communication is use the house of quality. It is a matrix which determines the relation between customer's anticipations and engineering characteristics. This matrix reveals all the questions that worth to be discussed by designers and engineers.<br/>

![](/Image/The%20house%20of%20quality.jpg)

The aim of using house of quality is to determine target technical performance measure rather than set targets or make decisions. The goal is to make sure that the product objectives matches customer anticipations.<br/>

It is constructed through the following steps:
1. Identify and classify the product objectives
2. Weigh the product objectives from customers perspective
3. Benchmark competition on measures of effectiveness
4. Identify engineering characteristics	
5. Map engineering characteristics to customer attributes	
6. Document engineering interrelationships	
7. Identify units of measure, cost, difficulties and other engineering characteristics
8. Benchmark competitions on engineering characteristics
9. Determine target technical performance measure	

As the first three steps have been done, we will continue with the fourth step.

#### 1. Identify engineering characteristics	

The purpose of identifying engineering characteristics is to figure out measurable product attributes, which are directly related to customer attributes. This step requires some engineering knowledge. It's important that designers and engineers communicate extensively.

For our project, the identified characteristics are,

* The choices of waterproof materials and the related techniques to process them
* The choices of materials around the region of detectors
* The effective area of the detectors
* The maximum amount of detectors required
* The maximum sound volume required for activating the device
* The maximum time it takes for starting the game
* The time it takes to display the result of the game
* The time between displaying the result of the game and displaying the alarm message to indicate the user should leave
* The times a player willing to play the same game
* The integration of all the components of the device
* The time for automatically switching off and turning on the device

#### 2. Map engineering characteristics to customer attributes	

Below is the house of quality. The columns are the identified engineering characteristics, the rows are the customer attributes. Here we can clearly see how the engineering characteristics influence the customer attributes. If a engineering characteristic has no influence on customer attributes, it should not be listed in the table.

![](/Image//Map%20engineering%20characteristics%20to%20customer%20attributes.jpg)

&#x2713;&#x2713; stands for strong relevance; &#x2713; stands for relevance; X stands for weak relevance; XX stands for no relevance; &#x2191; stands for ascend; &#x2193; stands for descend. 

For example, the more detectors are implemented, the larger the effective area, hence the higher the sensitivity of the device. However, this requires an additional work for modifying the existing structure. It is more difficult to manufacture, reduces the waterproofness and requires more effort for cleaning after installed in the toilet.

#### 3. Document engineering interrelationships	

As the engineering characteristics may influence each other as well, we present their relationships in the table below,

![](/Image/Document%20engineering%20interrelationships.jpg)

&#x2713;&#x2713; stands for strong relevance; &#x2713; stands for relevance; X stands for weak relevance; XX stands for no relevance; &#x2191; stands for ascend; &#x2193; stands for descend. 

For example, if the area for detection is increased, more detector can be installed, the waiting time can be reduced.

#### 4. Identify units of measure and benchmark competitions	

In the bottom of the house of quality, detailed product measures from different vendors are presented. First we identify units of measure, then analyze the product from each competitor. It is worth noting that none of the three products is superior than the other two in all measured features. 

| | | Waterproof material and related processing techniques | The effective area of the detectors | The maximum amount of detectors required | The maximum sound volume required for activating the device | The maximum time it takes for starting the game | The time it takes to display the result of the game | The times a player willing to play the same game | The choices of materials around the region of detectors | The time between displaying the result of the game and displaying the alarm message to indicate the user should leave | The integration of all the components of the device | The time for automatically switching off and turning on the device |
| --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- |
| | | &#x2191; | &#x2191; | &#x2191; | &#x2193; | &#x2193; | &#x2193; | &#x2191; | &#x2191; | &#x2193; | &#x2191; | &#x2191; |
| target measurement | Units of measure | mm<sup>2</sup> | mm<sup>2</sup> | Piece | dB | second | second | times | material | second | box | time |
| | Sega | Unknown | 28.27 | 1 | None | Unknown | 0.1 | Unknown | Plastic | Unknown | Unknown | Unknown | 
| | Indian | Unknown | 603.19 | 192 | None | Unknown | Unknown | Unknown | Plastic | Unknown | Unknown | Unknown | 
| | London | Unknown | 51.41 | 3 | None | Unknown | 0.1 | Unknown | Metal | Unknown | Unknown | Unknown | 

#### 5. Determine target technical performance measure	

Before determining target technical performance measure, it's necessary to add three rows in the bottom of the house of quality: technical viability, evaluated value, evaluated cost. Technical viability is a subjective estimation of how difficult it is to realize the designed device features; Evaluated cost is also a subjective estimation, which is related to technical viability; Evaluated value represents how important are the designed features for customers. This evaluation is achieved from the following analysis, 

    Evaluated value = product objective X identification (√√) + product objective X identification (XX)

After the analysis, target technical performance measure can be determined. Note that the house of quality is just a tool for collecting information. The final decisions should be made by the team after extensive discussions. Note that the contents of the house of quality are interrelated in different dimensions, special attention should be paid on not falling into endless iterated discussions. 

![](/Image/Determine%20target%20technical%20performance%20measure.jpg)

The complete house of quality for our project is shown below

![](/Image/Determine%20target%20technical%20performance%20measure%202.jpg)

After analyzing the house of quality, the resulting primary requirements are listed in the table below

| | |
| --- | --- |
| OR13 | The area of the waterproof material should not exceed 80mm<sup>2</sup> |
| OR14 | The effective area of the detectors should be at least 120mm<sup>2</sup> |
| OR15 | The maximum number of detectors should be at least 5 |
| OR16 | The maximum sound volume required for activating the device should be at most 40dB |
| OR17 | The maximum time it takes for starting the game should be no more than 3 seconds |
| OR18 | The time it takes to display the result of the game should be at most 0.1 second | 
| OR19 | The times a player willing to play the same game is 3 | 
| OR20 | The material around the region of detectors should be plastic |
| OR21 | The time between displaying the result of the game and displaying the alarm message to indicate the user should leave should be 8 seconds |
| OR22 | The integrated components of the device should be no more than 3 boxes |
| OR23 | The device should automatically switch off at 1 AM and turn on at 7 AM |

### ii. Collect and rationalize system-level requirements	

Through the analysis of the use cases, we get the functional requirements. Through the analysis of the house of quality, we get the primary requirements. Now is time to combine the two. Requirements that are duplicated, unclear or limits the design should be removed from the final list. The result is presented below

| No. | Requirements |
| --- | --- | 
| OR1 | The device can display ad when idling |
| OR2 | The device can receive the ad to be displayed |
| OR3 | The device can detect approaching human being | 
| OR4 | The device can display game instructions | 
| OR5 | The device can detect the sound of human being | 
| OR6 | The device can count down to start the game | 
| OR7 | The device can detect fluid | 
| OR8 | The device can interact with the user based on the pressure and direction of the fluid | 
| OR9 | The device can calculate and display the result of the game | 
| OR10 | The device can display the message to suggest that the user shall finish using the toilet as soon as possible |
| <s> OR11 </s> | <s> The system switches to a power saving mode during night </s> | 
| <s> OR12 </s> | <s> The system can wake up automatically in the morning  </s> |
| OR13 | The area of the waterproof material should not exceed 80mm<sup>2</sup> |
| OR14 | The effective area of the detectors should be at least 120mm<sup>2</sup> |
| OR15 | The maximum number of detectors should be at least 5 |
| OR16 | The maximum sound volume required for activating the device should be at most 40dB |
| OR17 | The maximum time it takes for starting the game should be no more than 3 seconds |
| OR18 | The time it takes to display the result of the game should be at most 0.1 second | 
| OR19 | The times a player willing to play the same game is 3 | 
| <s> OR20 </s> | <s> The material around the region of detectors should be plastic </s> |
| OR21 | The time between displaying the result of the game and displaying the alarm message to indicate the user should leave should be 8 seconds |
| OR22 | The integrated components of the device should be no more than 3 boxes |
| OR23 | The device should automatically switch off at 1 AM and turn on at 7 AM |

Requirement 11, 12 and 23 are duplicated, requirement 20 limits the design, therefore some of them are removed from the list.

## c) Identify the customer value proposition	

The next step is to reinspect the product from the perspective of customers. It is similar to the analysis of the task list. Customer proposals are not merely a simple list of system characteristics. They clearly indicate the advantage of the product to be designed over the existing products on the market. If no advantage can be established, the project should be ceased. The product concept, functional requirements and technical performance measure should be redone. The customer proposal for our project is,

#### Customer proposal for toilet interactive gaming project
* Comparing to SEGA, we will implement more detectors, increase the effective area, hence improve the user experience. 
* Comparing to the Indian vendor, we will implement less detectors to reduce the difficulty for manufacture. 
* Comparing to the British vendor, the functions are similar. However, we will choose different material with a different appearance. 

What's more, our product aims to provide better user experience, such as more interesting games, better waterproofness, faster reaction etc.

Note that till now we haven't estimated the cost. As it is a tailored product, the cost can be estimated after receiving customer's orders.

# 3. Explore the design space	

During the design stage, the team may encounter varies pitfalls. For example, the team has only one backup plan; the design is dominated by the most confident person in the team; only one or two members participate in the design while the rest are excluded from the process; the team can not find other useful concepts; the team failed to scrutinize the solution as a whole; the team failed to integrate promising plans, etc. In a nutshell, these pitfalls will appear if not all the team members participate in the process, being active and creative. 

The key point here is that the whole team should spend plenty of time on looking for all kinds of possible designs. It's important that all members participate in the process actively. 

## a) Discover concepts	

### i. Clarify the problem and decompose the functions	

Before looking for creative solutions, first we need to analyze the problems. As we have already analyzed the main functions and come up with the functional requirements list, this will be a good starting point for further exploration. We should be careful not confusing main functions with constraints. Main functions are what the system should perform to accomplish the task; Constraints are requirements for how the system perform the main functions. Here we start with the behaviour description. We copy the table of the behaviour description here, and perform a more detailed analysis. As time for development is limited, more efforts should be spent on being creatively looking for solutions that can satisfy customer's requirements. 

| No. | Requirements | Function name |
| --- | --- | --- |
| OR1 | The device can display ad when idling | Ad display |
| OR2 | The device can receive the ad to be displayed | Message receiving |
| OR3 | The device can detect approaching human being | Body detection |
| OR4 | The device can display game instructions | Instruction display |
| OR5 | The device can detect the sound of human being | Sound detection |
| OR6 | The device can count down to start the game | Countdown |
| OR7 | The device can detect fluid | Fluid detection |
| OR8 | The device can interact with the user based on the pressure and direction of the fluid | Pressure and direction detection |
| OR9 | The device can calculate and display the result of the game | Result display |
| OR10 | The device can display the message to suggest that the user shall finish using the toilet as soon as possible | Leaving message display |
| <s> OR11 </s> | <s> The system switches to a power saving mode during night </s> | <s> Power saving mode </s> |
| <s> OR12 </s> | <s> The system can wake up automatically in the morning </s> | <s> Automatically waking up </s> |

Next we preform more detail analysis on user's behaviour. Sentences with bold letters indicates where we can potentially be creative. 

| Operator | System |
| --- | --- | 
| An adult male will use the toilet | Interactive urinal device |
| The adult male approaches the toilet | |
| | ** The system detects approaching human being ** |
| | ** The system displays instructions ** |
| The adult male confirms readiness by sound | |
| | The system detects the sound |
| | ** The system converts the sound to signals for processing ** |
| | The system counts down to start the game |
| The adult male starts to use the toilet | |
| | The system detects fluid(urine) |
| | ** The system converts the fluid pressure to signals, produce feedback, and interact with the user through the game ** |
| | ** The system detects the direction of the fluid flow ** |
| | ** The system converts the fluid direction to signals, produce feedback, and interact with the user through the game ** |
| | ** The system counts the time and generate feedback ** |
| The adult male finishes using the toilet | |
| | The system shows the result |
| The adult male leaves | |
| | The system displays messages indicating the adult male to leave |

**End state: the system is idle and displays ad** 

### ii. Brainstorm and research	

Now the team should look for backup plans. As far as a problem can be solved by a backup plan, it doesn't matter if the plan has defect or not practically viable. The team should be more creative than being realistic. The team can try different methods such as brainstorm, asking for expert opinions, collecting information on the internet, searching for patents etc. The team should look for as many solutions as possible. Table below presents possible solutions for our project.

| The system detects approaching human being | The system converts the sound to signals for processing | The system converts the fluid pressure to signals, produce feedback, and interact with the user through the game | The system detects the direction of the fluid flow | The device displays instructions | The device processes signals and generates feedback | Game |
| --- | --- | --- | --- | --- | --- | --- |
| Infrared detector | Microphone | Liquid pressure detector | Ball shape multi-points detector | CRT | PC | QA |
| Ultrasonic detector | Sound detector | Liquid volume detector | Ellipse shape multi-points detector | LCD | Embedded system | C# | 
| Human body motion detector | | Accelerometer | Rectangular shape multi-points detector | | Mini PC | Java |
| Gravity sensor | | Temperature sensor | Cubic shape multi-points detector | | Embedded system + PC | Unity 3D | 
| Electro-optical sensor | | | | | | Python |

### iii. Organize concept fragments	

The next step is to sort out the solutions, prepare them in order and form a concept category tree. Here we present the tree using the table below

![](/Image/Organize%20concept%20fragments.jpg)

### iv. Prune and expand	

The advantage of using the tree structure is its ease for pruning and expanding. For example, categories that are not environmentally friendly can be removed from the tree. The resulting table is listed below

![](/Image/Prune%20and%20expand.jpg)

We cut off the following elements in the table:
- the motion detection device, because it is too expensive. 
- gravity sensitive device, because it is difficult to install.
- photoelectric sensor, because its sensitivity will be largely reduced when blocking by other objects.
- 3D irregular multi-points detector, because it is difficult to manufacture due to its special shape.
- accelerometer, because it is not commercially available at the moment.
- temperature sensor, because its responding time is too long, and it is subject to the environment.
- CRT display, because it is out of date.
- normal PC, because it is not easy to control external hardwares.
- embedded system, because it's video capability is not good enough.
- QA, because it's not suitable for interactive games in toilets
- Java, because no experienced java programmer in the company.

## b) Explore concepts	

Through the above analysis we get possible resolutions by combining the remaining elements in the table.
We list some of the combinations in the table below.

### i. Combine concept fragments	

For our project, Detect human approaching(2 solutions) * Detect sound(2 solutions) * Detect fluid direction * Detect fluid(3 solutions) * Display(1 solution) * Processor(2 solutions) * Game(3 solutions) = 144 solutions. 

### ii. Generate integrated concepts	

From the above combinations, we can choose the best solution to complete the design. The choices for each module are presented below.

![](https://github.com/lvzt/Mens-toilet-interactive-device-project-EN/blob/master/Image/detect%20people.jpg)

Body detectors: Ultrasonic transducer and Passive infrared sensor

![](https://github.com/lvzt/Mens-toilet-interactive-device-project-EN/blob/master/Image/ultrasonic%20and%20infrared.jpg)

Microphone and voice recognition module

![](https://github.com/lvzt/Mens-toilet-interactive-device-project-EN/blob/master/Image/microphone%20and%20voice%20.jpg)

Liquid detectors 

![](https://github.com/lvzt/Mens-toilet-interactive-device-project-EN/blob/master/Image/liquid%20detector.jpg)

Liquid pressure sensors

![](https://github.com/lvzt/Mens-toilet-interactive-device-project-EN/blob/master/Image/liquid%20pressure%20sensor.jpg)

Liquid volume detectors

![](https://github.com/lvzt/Mens-toilet-interactive-device-project-EN/blob/master/Image/liquid%20volumn%20detector.jpg)

Liquid speed detector

![](https://github.com/lvzt/Mens-toilet-interactive-device-project-EN/blob/master/Image/%E8%B6%85%E5%A3%B0%E6%B3%A2%E6%B6%B2%E4%BD%93%E6%B5%81%E9%80%9F%E4%BC%A0%E6%84%9F%E5%99%A8TCF1M-20TR2.jpg)

LCD

![](https://github.com/lvzt/Mens-toilet-interactive-device-project-EN/blob/master/Image/8%E5%AF%B8%E5%BD%A9%E8%89%B2%E6%B6%B2%E6%99%B6%E6%98%BE%E7%A4%BA%E5%99%A8L8008.jpg)

Data processing unit: Raspberry Pi, Pcduino, Arduino + PC

![](https://github.com/lvzt/Mens-toilet-interactive-device-project-EN/blob/master/Image/computer.jpg)

## c) Identify subsystem	

Now we have done enough analysis to generate a complete solution. Before that, we shall summarize all the remaining solutions. Here subsystems are identified by grouping components with same functions together (See the table below). Note that if we had done this at an early stage, we might be limited by the first design during the analysis. Now we have produced enough possible solutions, we can combine different components to see if we can get creative results. 

| Detect human approaching | | Detect sound | Detect fluid direction | | Detect fluid(urine) | Display | Processor | Game |
| --- | --- | --- | --- | --- | --- | --- | --- | --- |
| Ultrasonic detector | Infrared detector | Sound detector | All shapes of 2D multi-points detectors | Cubic shape multi-points detector | Liquid pressure detector | LCD | Mini PC | C# |
| | | | | | Liquid volume detector | | Embedded system + PC | Unity3D |
| | | | | | Transmission speed sensor | | | Python |

The subsystems are identified as follows

- Body detection
- Sound detection
- Liquid detection
- Display
- Data processing
- Game

# 4. Optimize design choices	

The team shall decide which solution to choose. Note that sometimes the discussion may fall into an endless circle, plan A is better than plan B, plan B is better than plan C, plan C is better than plan A. Considering all the influencing factors at the same time is rather difficult.

Weighing analysis is an effective way to tackle the dilemma mentioned above. It combines different factors to find the optimal solution based on convincible reasons. Problem illustration and primary data table can be used as input for setting the baseline for choosing the optimum design. The progress of the weighing analysis should be documented. The plan shall be modified when environment or situation changes.

## a) Select concepts	

### i. Identify alternatives	

First we copy the table of all possible solutions here.

| Detect human approaching | | Detect sound | Detect fluid direction | | Detect fluid(urine) | Display | Processor | Game |
| --- | --- | --- | --- | --- | --- | --- | --- | --- |
| Ultrasonic detector | Infrared detector | Sound detector | All shapes of 2D multi-points detectors | Cubic shape multi-points detector | Liquid pressure detector | LCD | Mini PC | C# |
| | | | | | Liquid volume detector | | Embedded system + PC | Unity3D |
| | | | | | Transmission speed sensor | | | Python |

### ii. Identify attributes	

Base on the product objectives we obtained previously, we can perform the weighing analysis. Product objectives are product decision attributes. Not all the product objectives will be covered by the final complete design. 

When qualifying either of the two conditions, the product attribute can be neglected.

* the product attribute is same in different candidate solutions.

* the product attribute is different in different candidate solutions, but it is strongly related to other product attributes.

Below are the product attributes we have developed previously. 

Product objective: Waterproof, Easiness to manufacture, Sensitivity during the game, Game is fun to play, Display alert message to suggest that the user should leave, Pregame sensitivity, Postgame sensitivity, Easiness to clean, Modification to the existing structure, Easiness to maintain, Robustness against cleaning agents, Automatically shot down in the night / turn on in the morning

First we remove the product objectives that are not related to the design, such as the game is fun to play (it is the objective of game designing, which shall be considered later), Display alert message to suggest that the user should leave (this is strongly related to other functions such as the sensitivity of the device), combine the before and post game sensitivity as one - game sensitivity, combine auto-switch off during night and auto-switch on during the day as one - energy saving. Energy saving is removed because it is not among the primary objectives. It will be added at a later stage. After the modification, the remaining product objectives are,

* Waterproof
* Easiness to manufacture
* Sensitivity during the game
* Modification to the existing structure
* Easiness to clean
* Robustness against cleaning agents
* Easiness to maintain 

### iii. Screen the alternatives	

As we have many different solutions for the final design, we are in the selection phase. The selection is based on the value assignment and comparing method. First an arbitrary solution is chosen as reference, with its value set to 0. Solutions that are better than reference marked with +; worse solutions marked with -; solutions marked with 0 if it is comparable with the reference. The result for our project is presented in the table below. Here we cut off two elements: sound detector and LCD, because they are the only candidates. 

![](/Image/Screen%20the%20alternatives.jpg)

From the above analysis we conclude that, the performance of ultrasonic and infrared detectors are comparable; flat multiple-points detector is better in the following aspects: waterproof, ease of manufacture, ease of cleaning, robustness, but it is less sensitive and less easy to maintain comparing to the ball shape detector; liquid pressure sensor are better than liquid speed detector and liquid volume detector; mini PC is better to maintain comparing to Arduino + PC; games designed by using Unity3D has a better quality, but usually they require more resource and hence less sensitive, therefore C# or Python will be selected in this stage. 

### iv. Rate alternatives

After the rough selection in the previous step, now we will perform more elaborated analysis. We evaluate the candidates with a score system: score 5 indicates that the alternative candidate is much better than the reference, score 3 represents the same, score 1 indicates that the alternative candidate is much worse than the reference. The results are presented in the table below, 

![](/Image/Rate%20alternatives.jpg)

### v. Weigh the attributes	

First we copy the results from the second chapter to here. As we can see, the sum of the factors does not equal to 100%, because they are just part of the over all project targets. 

Here we adjust the results a bit by combining the during game sensitivity and after game sensitivity to one subject, game sensitivity. 

| Waterproof | Easiness to manufacture | Game sensitivity | Pregame sensitivity | Easiness to clean | Modification to the existing structure | Easiness to maintain | Robustness against cleaning agents |
| --- | --- | --- | --- | --- | --- | --- | --- |
| 0.2 | 0.1 | 0.175 | 0.075 | 0.06 | 0.05 | 0.05 | 0.04 |

### vi. Calculate weight and sort	

Finally, we place the weighed attributes and candidates in one table and evaluate every candidates according to each attributes. The advantage of using this matrix is that it facilitates the discussion among team members. What's more, the document records the process of decision making, which can be displayed to the outsiders. The matrix after evaluation is shown below

![](/Image/Calculate%20weight%20and%20sort.jpg)

### vii. Score and select alternatives	

After analyzing the above matrix, we conclude that, we will choose the flat multi-point detector over the ball shape multi-point detector; choosing between ultra-sonic and infrared detector requires more analysis, or maybe we will try them both; choosing between mini pc and Arduino + pc also requires more analysis; we choose python over C# because python is more flexible. 

## b) Optimize parameters	

Usually this step is performed in the design revision circle. Because our project here is relatively simple, instead of using discrete analysis like before, we analyze the alternatives continuously, i.e., for each alternative we study the design for every engineering characteristics and optimize the parameters. In chapter 2 we already worked out the technical requirements,

| | |
| --- | --- |
| OR13 | The area of the waterproof material should not exceed 80mm<sup>2</sup> |
| OR14 | The effective area of the detectors should be at least 120mm<sup>2</sup> |
| OR15 | The maximum number of detectors should be at least 5 |
| OR16 | The maximum sound volume required for activating the device should be at most 40dB |
| OR17 | The maximum time it takes for starting the game should be no more than 3 seconds |
| OR18 | The time it takes to display the result of the game should be at most 0.1 second | 
| OR19 | The times a player willing to play the same game is 3 | 
| OR20 | The material around the region of detectors should be plastic |
| OR21 | The time between displaying the result of the game and displaying the alarm message to indicate the user should leave should be 8 seconds |
| OR22 | The integrated components of the device should be no more than 3 boxes |
| OR23 | The device should automatically switch off at 1 AM and turn on at 7 AM |


From the house of quality we get the system variable and place them together with the subsystem variable in the new house of quality matrix. The new matrix has the same column vector as the old one, but the row vector consist of all the alternatives, instead of the technical performance measure. Same as before, √√ represents the two elements are strongly positively related, √ positively related, X negatively related, XX strongly negatively related. For our project, as the selection of sound detector has been fixed with no other alternatives, the requirements 16 are removed from the new house of quality matrix, so as 21 and 23 . The results are in the table below

![](/Image/Optimize%20parameters.jpg)

Now is time to discuss with experts in the team extensively on specific designs, such as 3D modeling, finite element method analysis, estimating the amount of code to be written etc. When the amount of design variable is lager than the amount of requirements, the difference between the two is called design freedom. When setting one design variable, other design variables can be adjusted correspondingly according to time, cost etc. Sometimes, it's necessary to optimize different design variables according to certain constraints or limits. For some designs demos can be built to test their viability.

For our project, comparing to a mini PC, a normal PC has better performance. In the case of designing the game using an advanced game engine, normal PC is a better choice. On the other hand, there are many highly developed python libraries for gaming development. 

### i. Define the product family	

Now we have collected many alternatives. Through the previous optimization steps, we get different combinations which serves different market. All the combinations composite the product family. They are developed from the same prototype, share many components, facilities and even producing process. For our product the device can provide simple games for children, and more complicated games for adults.

# 5. Develop the architecture	

For a simple project whole designing task can be finished by one person. While for a complicated project with multiple people or even multiple teams involved in the task, communication between different parties is more than important. This chapter will focus on describing the system language, i.e., separate the product into subsystem and comprehensively describe the relation between them. The most important part is **the interface** of the subsystems. Here we use the behaviour-function-structure method. 

## a) Design the behaviour	

The analysis performed previously is mainly focused on the system structure. Now we will describe the system behaviour. Function analysis, control and verification are all based on system behaviour. 

### i. Review use cases, context, and functional requirements	

The use cases summarized in the first chapter is presented below

| Use case | Priority |
| --- | --- |
| Primary use case | |
| An adult male plays the game | High |
| A technician installs the device on the toilet | Low |
| A cleaner cleans the toilet | Low |
| A shopping mall staff displays advertisements | Medium |
| When the toilet is occupied for too long, the game shall cease and a message shall be displayed on the screen to suggest that the user shall finish using the toilet as soon as possible | High |
| A technician fixes the device | Medium |
| Secondary use case | |
| The system switches to a power saving mode during night | High |
| The system can wake up automatically in the morning | High |

The context has also been analyzed in the first chapter, which contains the relation between the system and the context, the system range, and the interface between the system and context. The table is presented below

| Is related to | Adult male | Gaming device | Body detector | Sound detector | Fluid detector | Result of the game |
| --- | --- | --- | --- | --- | --- | --- |
| Adult male | | use | is detected by | is detected by | is detected by | sees |
| Gaming device | `is used by` | | `includes` | `includes` | `includes` | `includes` |
| Body detector | `detects` | `is inside` | | | | |
| Sound detector | `detects` | `is inside` | | | | |
| Fluid detector | `detects` | `is inside` | | | | |
| Result of the game | `is seen by` | `is inside` | | | | |

What's more, in the first chapter we have worked out the functional requirements too. The table is presented below. Note that it is necessary to satisfy the requirements, but that is not adequate. Even if all the requirements are satisfied, it is not guaranteed that the project will be successful. It's important to combine all the features, run the system and check its behaviour. 

| No. | Requirements |
| --- | --- | 
| OR1 | The device can display ad when idling |
| OR2 | The device can receive the ad to be displayed |
| OR3 | The device can detect approaching human being | 
| OR4 | The device can display game instructions | 
| OR5 | The device can detect the sound of human being | 
| OR6 | The device can count down to start the game | 
| OR7 | The device can detect fluid | 
| OR8 | The device can interact with the user based on the pressure and direction of the fluid | 
| OR9 | The device can calculate and display the result of the game | 
| OR10 | The device can display the message to suggest that the user shall finish using the toilet as soon as possible |
| <s> OR11 </s> | <s> The system switches to a power saving mode during night </s> | 
| <s> OR12 </s> | <s> The system can wake up automatically in the morning  </s> |

Through the analysis of the house of quality we obtained technical performance measures. They are neglected here, because they have no influence on the description of system behaviour. In chapter three we have figured out all the subsystems, which are listed below,

- Body detection
- Sound detection
- Liquid detection
- Display
- Data processing
- Game

Till now we have gathered all we need for the next step.

### ii. Map behaviours to subsystems	

The first step of behaviour design is to describe behaviours at the system level. As we have analyzed behaviours in chapter 1, here we perform more detailed analysis. We use running description template to describe the system behaviour. It follows a single thread, starting from the beginning of the interaction between the user and the device to the end state of the system. The the user behaviour, which generates input information, is listed on the left of the template; the response of the system is on the right. If the interaction process involves more than one subsystem, it will be analyzed one by one according to the signal flow. The template contains three parts: initial state, behaviour analysis, end state. 

**An adult male plays the game**

**Initial state: the system is idle and displays ad**

**Interactive Urinal Device**

| An adult male will use the toilet (operator) | Body detection subsystem | Sound detection subsystem | Liquid detection subsystem | Data processing subsystem | Game subsystem | Display subsystem |
| --- | --- | --- | --- | --- | --- | --- |
| The adult male approaches the toilet | | | | | | |
| | The system detects human being nearby | | | | | |
| | | | | The system processes the signal | | |
| | | | | | | The system displays instructions |
| The adult male confirms readiness by sound | | | | | | |
| | | The system detects the sound | | | | |
| | | | | The system processes the sound signal | | |
| | | | | | | The system counts down to start the game |
| The adult male starts to use the toilet | | | | | | |
| | | | The system detects fluid | | | |
| | | | | The system processes the fluid pressure signal | | |
| | | | | | The system performs the calculation based on the signal  | |
| | | | | | | The system reacts to the adult male through the game based on the calculation |
| | | | The system detects the direction of the fluid | | | |
| | | | | The system processes the fluid direction signal | | |
| | | | | | The system performs the calculation based on the signal  | |
| | | | | | | The system reacts to the adult male through the game based on the calculation |
| The adult male finishes using the toilet | | | | | | |
| | | | | The system processes the fluid pressure signal | | |
| | | | | | The system performs the calculation based on the signal  | |
| | | | | | | The system reacts to the adult male through the game based on the calculation |
| The adult male keeps occupying the toilet | | | | | | |
| | The system detects the same person occupying the toilet | | | | | |
| | | | | The system processes the signal | | |
| | | | | | | The system displays messages indicating the adult male to leave |

**End state: the system is idle and displays ad** 

### iii. Identify messages, triggers, and interfaces	
Different subsystems provide different functions, which are triggered by different activities or events. Therefore we insert interfaces (between a subsystem and the context, or different subsystems) in the above template. All the interfaces are marked as grey in the template. For electronic and mechanic systems or software, it's easy to identify interfaces, as they need to response to signals, messages or function calls. The updated template is presented below,

| An adult male will use the toilet (operator) | Body detection subsystem | Sound detection subsystem | Liquid detection subsystem | Data processing subsystem | Game subsystem | Display subsystem |
| --- | --- | --- | --- | --- | --- | --- |
| The adult male approaches the toilet | | | | | | |
| `Event signal (Signal of human body)` | | | | | | |
| | The system detects human being nearby | | | | | |
| | `Event signal (Human body detection signal)` | | | | | |
| | | | | The system processes the signal | | |
| | | | | `Call (play)` | | |
| | | | | | | The system displays instructions |
| | | | | | | _**The system can display advertisement after idling for a while**_ |
| | | | | | | `Call (return)` |
| The adult male confirms readiness by sound | | | | | | |
| `Event signal (Sound)` | | | | | | |
| | | The system detects the sound | | | | |
| | | `Event signal (Sound detection signal)` | | | | |
| | | | | The system processes the sound signal | | |
| | | | | `Call (display)` | | |
| | | | | | | The system counts down to start the game |
| | | | | | | _**The system can display advertisement again if no fluid detected in the end of countdown**_ |
| | | | | | | `Call (back)` |
| The adult male starts to use the toilet | | | | | | |
| `Event signal (Fluid)` | | | | | | |
| | | | The system detects fluid | | | |
| | | | `Event signal (Fluid detection signal)` | | | |
| | | | | The system processes the fluid pressure signal | | |
| | | | | `Call (game)` | | |
| | | | | | The system performs the calculation based on the signal  | |
| | | | | | `Call (calculation, display)`  | |
| | | | | | | The system reacts to the adult male through the game based on the calculation |
| | | | The system detects the direction of the fluid | | | |
| | | | `Event signal (Fluid direction signal)` | | | |
| | | | | The system processes the fluid direction signal | | |
| | | | | `Call (game)` | | |
| | | | | | The system performs the calculation based on the signal  | |
| | | | | | `Call (calculation, display)`  | |
| | | | | | | The system reacts to the adult male through the game based on the calculation |
| The adult male finishes using the toilet | | | | | | |
| `Event signal (Fluid)` | | | | | | |
| | | | The system detects fluid | | | |
| | | | `Event signal (Fluid detection signal)` | | | |
| | | | | The system processes the fluid pressure signal | | |
| | | | | `Call (game)` | | |
| | | | | | The system performs the calculation based on the signal  | |
| | | | | | `Call (calculation, display)`  | |
| | | | | | | The system displays the result of the game |
| | | | | | | `Call (back)` |
| The adult male keeps occupying the toilet | | | | | | |
| `Event signal (not leaving)` | | | | | | |
| | The system detects the same person occupying the toilet | | | | | |
| | `Event signal (same person)` | | | | | |
| | | | | The system processes the signal | | |
| | | | | `Call (display)` | | |
| | | | | | | The system displays messages indicating the adult male to leave |
| | | | | | | `Call (back)` |

To prevent the interaction device fall into deadlock, two extra functions are added in the above table, which are marked yellow:
* After repeatedly displaying the hint message without getting any response, the interaction device will quit the current process and show the advertisement.
* If no liquid is detected in a certain time span, the interaction device will quit the current process and show the advertisement.

Below is a graph produced using IBM Rational Rhapsody,

![ActivityDiagram_Whitebox](https://github.com/lvzt/Mens-toilet-interactive-device-project-EN/blob/master/Image/03%20ActivityDiagram_Whitebox.jpg)

More related graphs are in the supplementary 

### iv. Identify system states	

Another way to analyse the system behaviour is to identify system states. When switching from one state to another, we keep track of how the system changes. This step is helpful for finding unstable states during the process. The result is shown in the table below

![](/Image/Identify%20system%20states.jpg)

The corresponding graph made by using IBM Rational Rhapsody is presented below

Body detection subsystem

![Body detection subsystem](https://github.com/lvzt/Mens-toilet-interactive-device-project-EN/blob/master/Image/04%20DetectingPeople_SD.jpg)

Sound detection subsystem

![Sound detection subsystem](https://github.com/lvzt/Mens-toilet-interactive-device-project-EN/blob/master/Image/05%20DetectingSound_SD.jpg)

Fluid detection subsystem

![Fluid detection subsystem](https://github.com/lvzt/Mens-toilet-interactive-device-project-EN/blob/master/Image/06%20DetectingUrine_SD.jpg)

Display subsystem

![Display subsystem](https://github.com/lvzt/Mens-toilet-interactive-device-project-EN/blob/master/Image/07%20Display_SD.jpg)

Data processing subsystem

![Data processing subsystem](https://github.com/lvzt/Mens-toilet-interactive-device-project-EN/blob/master/Image/08%20DataProcess_SD.jpg)

Game subsystem

![Game subsystem](https://github.com/lvzt/Mens-toilet-interactive-device-project-EN/blob/master/Image/09%20Game_SD.jpg)

### v. Set targets for behaviour	

The template is also useful for collecting other information, such as time related events or actions. It is updated and shown below

![](/Image/Set%20targets%20for%20behaviour.jpg)

### vi. Extract functional requirements to originating requirements	

The running description template may help the team focus on the whole system behaviour, instead of subsystem behaviours. Different templates are made for different use cases. After combining all the templates, we can work out the function requirements. Here the requirements are goal-oriented, since each of them corresponds to one or multiple functions. The summarized function requirements are listed in the table below.

| Body detection subsystem | Sound detection subsystem | Liquid detection subsystem | Data processing subsystem | Game subsystem | Display subsystem |
| --- | --- | --- | --- | --- | --- |
| The system can detect human being nearby | The system can detect human sound | The system detects fluid pressure | The system can process the human body detection signal | The system can react to the adult male through the game based on the calculation of the fluid pressure | The system can display the reaction on the screen |
| The system can detect the same person occupying the toilet | | The system can detect the direction of the fluid | The system can process the sound signal | The system can react to the adult male through the game based on the calculation of the fluid direction | The system can display ad again if no instruction is detected for a certain time | 
| | | | The system can process the liquid pressure signal | | The system can display countdown timer |
| | | | The system can process the liquid direction signal | | The system can display ad while no liquid is detected by the end of the countdown |
| | | | | | The system can display the result of the game based on the calculation |
| | | | | | The system can display messages indicating the adult male to leave |

### vii. Trace derived requirements to original requirements	

Through the previously analysis, we have a better understanding of the functional requirements. During this process, many derived requirements may appear. Here we trace the derived requirements to the original requirements, check if there are conflicts and solve them by modifying the functional requirements. The result is listed in the table below

| No. | Derived requirements | function name |
| --- | --- | --- |
| DR 1 | The system can detect human being nearby | Body detection |
| DR 2 | The system can detect human sound | Sound detection | 
| DR 3 | The system detects fluid pressure | Liquid detection |
| DR 4 | The system can detect the direction of the fluid | Liquid detection |
| DR 5 | The system can process the human body detection signal | Signal processing |
| DR 6 | The system can process the sound signal | Signal processing |
| DR 7 | The system can process the liquid pressure signal | Liquid detection |
| DR 8 | The system can process the liquid direction signal | Liquid detection |
| DR 9 | The system can react to the adult male through the game based on the calculation of the fluid pressure | Game |
| DR 10 | The system can react to the adult male through the game based on the calculation of the fluid direction | Game |
| DR 11 | The system can display instructions | Display |
| DR 12 | The system can display ad again if no instruction is detected for a certain time | Display |
| DR 13 | The system can display countdown | Display |
| DR 14 | The system can display ad while no liquid is detected by the end of the countdown | Display |
| DR 15 | The system can display the result of the game based on the calculation | Display |
| DR 16 | The system can detect the same person occupying the toilet | Body detection |
| DR 17 | The system can display messages indicating the adult male to leave | Display |

Base on the table above, we can trace derived requirements to original requirements.

| No. | Derived requirements | function name | Trace to |
| --- | --- | --- | --- |
| DR 1 | The system can detect human being nearby | Body detection | OR 3 |
| DR 2 | The system can detect human sound | Sound detection | OR 5 |
| DR 3 | The system can detect fluid pressure | Liquid detection | OR 7 |
| DR 4 | The system can detect the direction of the fluid | Liquid detection | OR 8 |
| DR 5 | The system can process the human body detection signal | Signal processing | OR 3 |
| DR 6 | The system can process the sound signal | Signal processing | OR 5 |
| DR 7 | The system can process the liquid pressure signal | Liquid detection | OR 8 |
| DR 8 | The system can process the liquid direction signal | Liquid detection | OR 8 | 
| DR 9 | The system can react to the adult male through the game based on the calculation of the fluid pressure | Game | OR 9 |
| DR 10 | The system can react to the adult male through the game based on the calculation of the fluid direction | Game | OR 9 |
| DR 11 | The system can display instructions | Display | OR 4 |
| DR 12 | The system can display ad again if no instruction is detected for a certain time | Display | OR 1 |
| DR 13 | The system can display countdown | Display | OR 6 |
| DR 14 | The system can display ad while no liquid is detected by the end of the countdown | Display | OR 1 |
| DR 15 | The system can display the result of the game based on the calculation | Display | OR 9 |
| DR 16 | The system can detect the same person occupying the toilet | Body detection | OR 10 |
| DR 17 | The system can display messages indicating the adult male to leave | Display | OR 10 |

Combining the derived requirements table with the original requirements table, we get the tracing matrix

| | | The device can display ad when idling | The device can receive the ad to be displayed | The device can detect approaching human being | The device can display game instructions | The device can detect the sound of human being | The device can countdown to start the game | The device can detect fluid |  The device can interact with the user based on the pressure and direction of the fluid | The device can calculate and display the result of the game | The device can display the message to suggest that the user shall finish using the toilet as soon as possible |
| --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- |
| | | OR1 | OR2 | OR 3 | OR 4 | OR 5 | OR 6 | OR 7 | OR 8 | OR 9 | OR 10 |
| DR 1 | The system can detect human being nearby | | | X | | | | | | | |
| DR 2 | The system can detect human sound | | | | | X | | | | | |
| DR 3 | The system can detect fluid pressure | | | | | | | X | | | |
| DR 4 | The system can detect the direction of the fluid | | | | | | | | X | | |
| DR 5 | The system can process the human body detection signal | | | | | | | | X | | |
| DR 6 | The system can process the sound signal | Signal processing | | | | | | | | X | | |
| DR 7 | The system can process the liquid pressure signal | Liquid detection | | | | | | | | X | | |
| DR 8 | The system can process the liquid direction signal | Liquid detection | | | | | | | | X | | |
| DR 9 | The system can react to the adult male through the game based on the calculation of the fluid pressure | | | | | | | | | X | |
| DR 10 | The system can react to the adult male through the game based on the calculation of the fluid direction | | | | | | | | | X | |
| DR 11 | The system can display instructions | | | | X | | | | | | |
| DR 12 | The system can display ad again if no instruction is detected for a certain time | X | | | | | | | | | |
| DR 13 | The system can display countdown timer | | | | | | X | | | | |
| DR 14 | The system can display ad while no liquid is detected by the end of the countdown | X | | | | | | | | | |
| DR 15 | The system can display the result of the game based on the calculation | | | | | | | | | X | |
| DR 16 | The system can detect the same person occupying the toilet | | | | | | | | | | X |
| DR 17 | The system can display messages indicating the adult male to leave | | | | | | | | | | X |

From the matrix above we can find the original requirements that do no have a corresponding derived requirement. They are converted directly to derived requirements and listed in the table below

| No. | Derived requirements | function name | Trace to |
| --- | --- | --- | --- |
| DR 18 | The system can receive the ad to be displayed | Message receiving | OR 2 |

### viii. The centrality of the operational description template	

Now we switch back to the operational description template. User is on the left. Based on the user behaviour we can define the norm for the user interface, which can be used for editing the user manual. The requirement norm for each subsystem can be defined based on their behaviour description. What's more, through analysing the template, the test norm and interface requirement norm can also be defined.</br>

![](/Image/Centrality%20of%20the%20operational%20description%20template.jpg)

## b) Design the flow and control	

To avoid getting lost in the details during function analysis, we use two different methods, one based on functions, the other based on status changes. 

### i. Identify functional relationships	

System behaviours can be seen as functional interactions between different subsystems. We describe the behaviours using the functional matrix, which is generated from the derived functional requirements. 

| | Body detection | Sound detection | Fluid detection | Data processing | Game | Display | Message receiving | Automatic power saving |
| --- | --- | --- | --- | --- | --- | --- | --- | --- |
| Column is applied or has influence on row | In case any human being approaching the device and cause the system generate signals | In case sound is produced and cause the system generate signals | In case fluid is produced and cause the system generate signals | | | | | |
| Body detection | --- | prior to | | cause | | | | |
| Sound detection | | --- | prior to | cause | | | | |
| Fluid detection | | | --- | cause | | | | |
| Data processing | | | | --- | call | call | | cause |
| Game | | | | | --- | call | | |
| Display | | | | | | --- | call | |
| Message receiving | | | | | | | --- | |
| Automatic power saving | | | | | | | | --- | 

Note that the entries below the diagonal are empty, otherwise the device will fall into deadlock or infinite loop.

### ii. Summarize state changes	

As mentioned above, another way to describe the system behaviours is to implement the status changing matrix, which is focused on status changing and event triggering. Through analysing the function matrix, we have a better understanding on the system behaviours. Through status changing matrix, we can double-check if any system states are omitted in the previous step. As we can see from the table below, there are non-empty entries below the diagonal, which suggests that the system might be in abnormal states. 

![](/Image/Summarize%20state%20changes.jpg)

In the table above a deadlock state is marked with bold borders. Below is the state change graph. Within the square is the system status. Lines represent paths, with events indicated above them. Each route is a single loop. 

![](/Image/state_change.jpg)

## c) Design the structure	

### i. Identify interfaces and finalize subsystems	

Here we use interface matrix to identify and analyse interfaces. Outer entities and inner components are listed in the top row and left column of the matrix. The rest are interfaces, which describe messages or events transferred between subsystems. The identified interfaces are recorded in the interface control document. 

| (Event) | Human being who is going to use the toilet | Shopping mall | Body detection system | Sound detection system | Fluid detection system | Data processing system | Game system | Display system |
| --- | --- | --- | --- | --- | --- | --- | --- | --- |
| Human being who is going to use the toilet | --- | | Human being approaching; The same user does not leave | Human being make sound | Human being release liquid in the urinal | Switch to power saving mode when idling for too long | | |
| Shopping mall | | --- | | | | | | Display ad |
| Body detection system | | | --- | | | Send out signal to be received; Switch to power saving mode when idling for too long | | |
| Sound detection system | | | | --- | | Send out signal to be received | | |
| Fluid detection system | | | | | --- | Send out signal to be received | | |
| Data processing system | | | | | | --- | Signal transfer | Signal transfer | 
| Game system | | | | | | | --- | Transfer signal |
| Display system | | Receive ad to be displayed | | | | | Receive signal and display | --- |

If we remove the outside entities from the above matrix, we will get the design structure matrix. This is very useful when multiple teams cooperate to accomplish the task. Usually different team works on different subsystem. **It's very important that all the teams have the same definition for every interface**. 

| (Event) | Body detection system | Sound detection system | Fluid detection system | Data processing system | Game system | Display system |
| --- | --- | --- | --- | --- | --- | --- |
| Body detection system | --- | | | Send out signal to be received; Switch to power saving mode when idling for too long | | |
| Sound detection system | | --- | | Send out signal to be received | | |
| Fluid detection system | | | --- | Send out signal to be received | | |
| Data processing system | | | | --- | Transfer signal | Transfer signal |
| Game system | | | | | --- | Transfer signal |
| Display system | | | | | Receive signal and display | --- |

The above matrix should be adjusted to have most of the non-empty entries above the diagonal. What's more, subsystems that have more interactions between each other should be merged to one super subsystem. In our case, from the matrix we can see that the game system, data processing system and display system are closely related. To avoid potential errors, it's better to develop these three systems at the same time. Therefore, we combine them as one, namely display, game and data processing system.

### ii. Document links	

In step we study how different subsystems should communicate and interact with each other through their interfaces. Here links may refer to RS232, Ethernet, Wi-Fi, USB etc.

| (Event) | Human being who is going to use the toilet | Body detection system | Sound detection system | Fluid detection system | Data, game and display system |
| --- | --- | --- | --- | --- | --- |
| Human being who is going to use the toilet | --- | Approach the device | Send out sound | Release urine in the urinal | |
| Body detection system | | --- | | | Send out electric signal |
| Sound detection system | | | --- | | Send out electric signal |
| Fluid detection system | | | | --- | Send out electric signal |
| Data, game and display system | | | | | --- | 

### iii. Identify emergent interactions	

Matrix is very useful as it can reveal relationships between different components, changing of status, interfaces between different subsystems, etc. All the analysis follow the same procedure -- from use cases to function analysis. Now we need to consider some unexpected side-effects which might rise from different subsystems. These emergent interactions may occur due to friction, vibration, heat, etc., which are common among mechanical systems but rare among software systems. We use interaction matrix to analyse these side-effects. Afterwards, we may consider to add new requirements or even subsystems to control the side-effects. 

| Side-effect | Human being who is going to use the toilet | Body detection system | Sound detection system | Fluid detection system | Data, game and display system |
| --- | --- | --- | --- | --- | --- |
| Human being who is going to use the toilet | --- | | Noise | Erosion | |
| Body detection system | | --- | | | |
| Sound detection system | | | --- | | |
| Fluid detection system | | | | --- | Leakage |
| Data, game and display system | | | | | --- | 

### iv. Sketch a design concept	

Before substantiating the design of subsystems, we will sketch a design concept, which will be very useful later on. 


### v. Create a rough-cut bill of materials	

From the previous elaborated design we can estimate the types and quantities of raw materials we need, and their cost. We sort them out in descending order of system and subsystem levels. Note that even though we work out the bill of materials, it does not mean that the design is fixed. However, it facilitates the cost estimation of each subsystems. Estimating the total cost at an early stage is rather important, and materials account for a large proportion of the total cost.

| 1 | Interactive Urinal Device | | | |
| --- | --- | --- | --- | --- |
| 1.1 | | Body detection system | | |
| 1.1.1 | | | Infrared body detection sensor | |
| 1.2 | | Sound detection system | | |
| 1.2.1 | | | Sound detection sensor | |
| 1.3 | | Fluid detection system | | |
| 1.3.1 | | | Pressure sensor | |
| 1.3.2 | | | Waterproof glue | |
| 1.4 | | Data, game and display system | | |
| 1.4.1 | | | Display subsystem | |
| 1.4.1.1 | | | | Liquid crystal display |
| 1.4.2 | | | Data processing subsystem | |
| 1.4.2.1 | | | | PC |
| 1.4.2.1 | | | | Embedded system |
| 1.4.3 | | | Game subsystem | |
| 1.4.3.1 | | | | Python |

Based on the table above, we estimated the cost. The viability analysis is omitted here, as it requires professional knowledge. 

| Rough-cut bill of materials | | | | | Material description | Unit | Quantity | Price | Summed price | Subsystem cost | Total cost |
| --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- |
| 1 | Interactive Urinal Device | | | | | | | | | | 3137.2 |
| 1.1 | | Body detection system | | | | | | | | 8.2 | |
| 1.1.1 | | | Infrared body detection sensor | | Module | Piece | 1 | 8.2 | 8.2 | | |
| 1.2 | | Sound detection system | | | | | | | | 275 | |
| 1.2.1 | | | Sound detection sensor | | Module | Piece | 1 | 275 | 275 | | |
| 1.3 | | Fluid detection system | | | | | | | | 230 | |
| 1.3.1 | | | Pressure sensor | | Module | Piece | 5 | 28 | 140 | | |
| 1.3.2 | | | Waterproof glue | | | Bottle | 2 | 45 | 90 | | |
| 1.4 | | Data, game and display system | | | | | | | | | |
| 1.4.1 | | | Display subsystem | | | | | | | 2624 | |
| 1.4.1.1 | | | | Liquid crystal display | | Piece | 1 | 289 | 289 | | |
| 1.4.2 | | | Data processing subsystem | | | | | | | | |
| 1.4.2.1 | | | | PC | | Set | 1 | 2300 | 2300 | | |
| 1.4.2.1 | | | | Embedded system | | Piece | 1 | 35 | 35 | | |
| 1.4.3 | | | Game subsystem | | | | | | | | |
| 1.4.3.1 | | | | Python | | | 1 | Free | Free | Free | |

### vi. Allocate target technical performance measure to subsystem	

Through the analysis using the house of quality we have gotten the originating requirements, including the cost and liability. To guarantee that the requirements are satisfied in the end, the targets (including it's technical performance measure) should be allocated to corresponding subsystems. If the estimated cost is higher than expectation, cutting of the cost of each subsystem should be calculated. Here we skip this step. 

# 6. Validate the design	

Verification is to check if the product is produced in the proper way; Validation is to make sure that the product fits customers' desire. As suggested by the V-model, design and test are related. Here we do not focus on the design-manufacture-test procedure, but rather the steps before and after that.

## a) Verify requirements	

### i. Conduct design reviews	

There are two types of verifications: customer verification and internal verification. Through customer verification we can make sure the product is designed as customer requested. In the mean time, ambiguities in the requirements can be clarified during the discussion. These requirements are usually behaviour related, which results in functions that the system should provide. The purpose of the verification is to figure out how to fabricate the product. It should satisfy customer's requirement without violating any regulation. The regulation related requirements are generally running process related, instead of behaviour related. Anyway, during the verification we should focus on the behaviour of the system, instead of the structure of the system.

For complicated systems, there will be more than one verifications, some for subsystems, some for the whole system. During different verifications we focus on different aspects. The state of design are also different at different stages. One thing for sure, the behaviour description template developed in the previous step will be the main tool for verifications.

#### 1. Determine if entry criteria are met	

Evaluation on the design should be done before the verification. The team should determine if entry criteria are met. Listed below are the criteria for evaluation.

| User manual |
| --- |
| Use case |
| Functional requirements |
| Assessment from the client |
| Competitiveness analysis |
| Technical performance analysis |
| House of quality documents |
| Customer value proposition | 
| Candidates for the major design |
| Concept of the assembled product |
| Major design decisions analysis |
| Running description template |
| Function interaction matrix |
| State change matrix |
| Interface, connection and interaction matrix |
| Test plan |
| Failure modes and effect analysis |
| Project development plan |

#### 2. Schedule the review meeting	

For internal verifications, experts in the field should be invited. For customer verifications, it's necessary to find customer deputies and form a group. They can present customer opinions properly. 

#### 3. Present the design	

It's recommended to present the product design from high levels to low levels, i.e., integrated product concept → function interaction matrix → status exchange matrix → interface, connection and interaction matrix. To guide the verification group for expressing their opinions effectively, it's better to present them the running description too, therefore they could have a better understanding of the task procedure.

#### 4. Collect review panel comments	

Opinions from the verification group on different parts of the design (functional requirements, procedure, etc.) should be collected. These information should be processed and written in the verification reports. 

#### 5. Use exit criteria to assess whether the review was passed	

Before the verification meeting, the exit criteria should be distributed to the group members. It should include: satisfaction of the customer requirements; technical viability of the design; risk of the project etc. Based on the exit criteria group members can assess whether the review is passed. 

#### 6. Reschedule if the review did not pass	

If the review does not pass the verification, it can be modified based on the advices in the report, and reschedule for the next verification. 

### ii. Develop the test plan	

Usually the test plan will be worked out at a rather late stage. In that case, the content of the test plan will be based on the product design instead of requirements. We suggest the team to work out the test plan at an early stage, therefore the original requirements won't be omitted during the test.

#### 1. Identify behavioural test sequence	

The running description template is used for designing test procedure. Two columns are added in the template: the expected result and the real result. The real result should be filled in by the test engineer.  What's more, the template should also involve any special setups required for the test, such as equipments, costumes.

For our project, the test procedure is as follows,

| Test process: Adult male using the device |
| --- |
| Initial state: |
| The device displays ads |
| Lab setup: |
| Waterproof gloves, or waterproof costumes if necessary |
| Test setup: |
| Use a plastic bottle of warm water to simulate the urine, which will be squeezed into the urinal |

</br>
![](/Image/Identify%20behavioural%20test%20sequence.jpg)
</br>

| End state: adult male quit using the urinal | 
| --- |
| 1. Display ad|

#### 2. Develop behavioural test methodology	

Through behaviour analysis we have gotten the original requirements. There should be a test plan for every system behaviour. Usually test plans are presented in tables, listed with test schedules, test equipments, entrance and exit conditions. Entrance condition is the requirements to be satisfied before the test; exit condition is the minimum requirements for passing the test. 

For some tests it's not necessary to wait until the prototype system is fully developed. The earlier a test is started, the earlier defects in the design can be detected and fixed. The test stage can easily become the bottleneck of the project. To avoid accumulating too many test tasks and causing a delay, it's better to start the tests as early as possible.

The exit condition shouldn't be very flexible. It should be approved by customers, owners and rule makers. Tests should be repeated and analysed using statistics methods. While developing the test plan, it's better to have a full requirements list with complete structures, clear descriptions. For the ideal case, test plans should be developed based on the requirements list. Therefore, test plans should be considered during the preparation of the requirements. 

For our project, behaviour test plan is analysed as follows,

| Test No. | Test method | Test equipment | Entry condition | Exit condition |
| --- | --- | --- | --- | --- |
| TP1 | Test procedure: adult male use the toilet | Adult male | Fully developed prototype | Instruction is displayed when adult male approaching the device: after detect human sound, the system starts countdown; Interactive game responses to the fluid released by the adult male; Game results is displayed when adult male finishes using the urinal; Ad is displayed when system is idle |
| TP2 | Test procedure: adult male approaching the device and leave | Adult male | Body detection, display, data processing and game systems | Instruction is displayed when adult male approaching; Ad is displayed when adult male leaves |
| TP3 | Test procedure: adult male approaching the device, send out sound instruction and then leave | Adult male |  Body detection, display, data processing and game systems | Instruction is displayed when adult male approaching the device: after detect human sound, the system starts countdown; Ad is displayed when system is idle |
| TP4 | Test procedure: adult male keep occupying the urinal after finish using it | Adult male |  Body detection, display, data processing and game systems | Instruction is displayed when adult male approaching the device: after detect human sound, the system starts countdown; Interactive game responses to the fluid released by the adult male; Game results is displayed when adult male finishes using the urinal; Leaving instruction is displayed when detecting the same adult male still occupying the urinal |

#### 3. Repeat for non-behavioural tests	

Most of the non-behavioural requests can be obtained using the quality house. Some additional requests may be generated during the review. Test are required for every request. 

For our project, non-behavioural tests are listed in the table below,

| Primary request | Abstract name | Test id | Test method | Validation method | Test equipment | Entry condition | Exit condition |
| --- | --- | --- | --- | --- | --- | --- | --- |
| OR 13 | The area of the detector covered by waterproof material | TP 5 | Test process: test the area of the urinal need to be modified | Analysis | Calliper, calculator | Finish modification of the urinal | The area of the modification is less than 80 mm<sup>2</sup> |
| OR 14 | The maximum detection area | TP 6 | Test process: test the detection area in the urinal | Analysis | Fluid pressure and direction detectors | Install fluid pressure and direction detectors in the urinal | The maximum detection area is no less then 120 mm<sup>2</sup> |
| OR 15 | The maximum number of detectors can be installed | TP 7 | Test process: test the amount of detectors can be installed in the urinal | Check | Fluid pressure and direction detectors | Install fluid pressure and direction detectors in the urinal | The amount of detectors can be installed in the urinal is no less than 5 | 
| OR 16 | The minimum volume of the human sound can be detected | TP 8 | Test process: test if the sound detector can detect human sound | Physical test | Sound detector | Install sound detector in the urinal | The detector can detect sound higher than 40 dB |
| OR 17 | The maximum time waiting to start the game | TP 9 | Test process: test the time to start the game after countdown | Analysis and physical test | Display, data processing and game system | Body and sound detector working properly | The maximum waiting time for starting the game is 3 second |
| OR 18 | The maximum time waiting to display the game result | TP 10 | Test process: Adult male finish using the toilet and see the game result | Physical test | Fluid pressure and direction detectors, display, data processing, game system | Adult male releases urine in the urinal | The maximum time waiting for the game result is 0.1 second |
| OR 19 | User selects the same game for no less than 3 times | TP 11 | Test process: there are multiple games for selection | Analysis and check | Display, data processing, game system | Adult male releases urine in the urinal | User selects the same game for at least 3 times |
| OR 21 | The waiting time for displaying the quit using the urinal message | TP 12 | Test process: The same user keep occupying the urinal, the device display message indicting he should leave | Analysis and test | Display, data processing, game system | The adult male finish using the toilet and leave | The waiting time for displaying the message is 8 second |
| OR 22 | Components are compactly allocated | TP 13 | Test process: All subsystems are installed compactly | Analysis and test | Display, data processing, game system | All subsystems are installed | All the components can be contained in three boxes | 
| OR 23 | Auto switch | TP 14 | Test process: correctly set the timer of the device | Analysis and test | Display, data processing, game system | Display, data processing and game systems are installed | Set the auto switch off time at 1 am and auto switch on time at 7 am |

After finishing the plan for non-behavioural tests, a table should be designed for practical test. For example, after 10 tests, statistical evaluations (mean, variance, etc.) based on six sigma can be used for determining if the design has passed the test or not.

#### 4. Map test activities to system requirements

It's important to check the completeness of the tests. We map the test activities to system requirements. In this way we can be sure that there is a test activity for every original request. The result will be presented in a reference matrix. Any omitted tests should be added now.

| Originated from | Derived request number | Derived function request | Function name | Test process |
| --- | --- | --- | --- | --- |
| OR 3 | DR 1 | Device can detect human being approaching | Body detection | TP 1 | 
| OR 5 | DR 2 | Device can detect the sound sent out by the adult male | Sound detection | TP 1 |
| OR 7 | DR 3 | Device can detect the fluid pressure | Fluid detection | TP 1 | 
| OR 8 | DR 4 | Device can detect the fluid direction at many detection points | Fluid detection | TP 1 |
| OR 3 | DR 5 | Device can convert and process body detection signal | Data processing | TP 1 | 
| OR 5 | DR 6 | Device can convert and process sound detection signal | Data processing | TP 1 |
| OR 8 | DR 7 | Device can convert and process fluid pressure signal, send it to the game subsystem | Fluid detection | TP 1 |
| OR 8 | DR 8 | Device can convert and process fluid direction signal, send it to the game subsystem | Fluid detection | TP 1 |
| OR 9 | DR 9 | Device can perform calculation based on the fluid pressure signal | Game | TP 1 |
| OR 9 | DR 10 | Device can perform calculation based on the fluid direction signal | Game | TP 1 |
| OR 4 | DR 11 | Device can display game instructions | Display | TP 1 | 
| OR 1 | DR 12 | Device can return to the initial state after displaying the game instructions for a while without receiving human sound indicating starting the game | Display | TP 2 |
| OR 6 | DR 13 | Device can display countdown | Display | TP 1 |
| OR 1 | DR 14 | Device can return to the initial states by the end of the countdown if no fluid detected | Display | TP 3 | 
| OR 9 | DR 15 | Device can display the game result based on the calculations | Display | TP 1 |
| OR 10 | DR 16 | Device can detect the same user occupying the toilet without leaving | Body detection | TP 4 |
| OR 10 | DR 17 | Device can display message indicating the user should leave | Display | TP 4 | 

The result of checking the test plan for non-behavioural requests is presented in the table below

| Request ID | Non-behavioural request | Abstract name | Test process |
| --- | --- | --- | --- |
| OR 13 | The area of waterproof material is less than 80 mm<sup>2</sup> | The area of waterproof material | TP 5 |
| OR 14 | The detection area of the toilet is larger than 120 mm<sup>2</sup> | The area of detection | TP 6 |
| OR 15 | The number of detectors are no less than 5 | The number of detectors | TP 7 |
| OR 16 | The volume to activate sound detector is at least 40 db | The volume to activate sound detector | TP 8 |
| OR 17 | The game can be started within 3 seconds | The time to start the game | TP 9 |
| OR 18 | The game can display the result within 0.1 second | The time for displaying the result | TP 10 |
| OR 19 | The user choose the same game for at least 3 times | The times the user choose the same game | TP 11 |
| OR 21 | After waiting for at least 8 seconds, the device will display message indicating the user to leave | The waiting time for displaying the message | TP 12 | 
| OR 22 | All the components can be placed in no more than 3 boxes | The collection of components | TP 13 |
| OR 23 | The device will automatically switch on at 7 am and switch off at 1 am | Automatic switch on and off | TP 14 |

A reference matrix can be developed to check the completeness of the tests.

![](/Image/Map%20test%20activities%20to%20system%20requirements.jpg)

Here we find that OR2 (the interactive device should be able to receive instructions and display commercials) hasn't scheduled for test, which should be added.

| | | | |
| --- | --- | --- | --- |
| OR 2 | The device can receive instructions and display ads | Display ads | TP 15 |

## b) Manage risks

Risk management is of great importance. It has been taken into considerition when working out the quality house. There are two ways to manage risks: the bottom-up method -- the failure mode and effects analysis (FMEA); the bottom down method -- fault tree analysis (FTA). For our project, we choose FMEA. Behaviours that minimize risks are called rectification behaviours, which aim to reduce probability of malfunctions, and the potential damage they may introduce.

### i. Conduct failure modes and effects analysis (FMEA)

#### 1. Select functions

As mentioned above, the FMEA is a bottom-up method, which starts the analysis from the basic components or subsystems. For our project we start with subsystem. Note that analysis start with functions may help us to discover the same risks.

| |
| --- |
| Body detection subsystem |
| Sound detection subsystem |
| Fluid detection subsystem |
| Data process subsystem |
| Game subsystem |
| Display subsystem |

#### 2. Identify failure modes	

Here we identified failure modes for every subsystem. Note that some subsystems may have more than one failure modes.

| Failure mode index | Identified function or subsystem | Failure mode |
| --- | --- | --- |
| F.1 | Body detection subsystem | Body detection failure |
| F.2 | Sound detection subsystem | Sound detection failure |
| F.3 | | Noise |
| F.4 | Fluid detection subsystem | Fluid detection failure | 
| F.5 | | Fluid detection unit shedding |
| F.6 | | Water leakage |
| F.7 | | Erosion |
| F.8 | Data processing subsystem | Signal not received | 
| F.9 | | High latency during data processing |
| F.10 | | Could not wake up from power saving mode |
| F.11 | Game subsystem | Display wrong result |
| F.12 | | High latency during the game | 
| F.13 | Display subsystem | Display failure |
| F.14 | | The display mode is not correct |

#### 3. Assess potential impact of failure	

Failure modes are classified in three levels, according to their impact. 1. local -- direct impact caused by the malfunction; 2. system -- impact on the whole system; 3. task -- impact on the environment and surrounding people. 

![](/Image/Assess%20potential%20impact%20of%20failure.jpg)

#### 4. Brainstorm possible causes	

Next is to analyse every failure mode and find out the reason. There are many different causes. Most of them fall into four categories: human, machine(such as components failure), method(such as software error), and material. 

| Failure mode index | Identified function or subsystem | Impact (a. local; b. system; c. task) | Possible causes |
| --- | --- | --- | --- |
| F.1 | Body detection subsystem | Body detection failure | b. Fail to detect human body or long delay; c. Task failed | Body detection unit damaged |
| F.2 | Sound detection subsystem | Sound detection failure | b. Fail to detect sound or long delay; c. Task failed | Sound detection unit damaged |
| F.3 | | Noise | b. Detect noise or irrelevant sound | Multiple persons make sound near the device |
| F.4 | Fluid detection subsystem | Fluid detection failure | b. Fail to detect fluid or long delay; c. Task failed | Fluid pressure is too low |
| F.5 | | Fluid detection unit shedding | a. Part of the urinal is not covered by fluid detectors; b. The device fails to interact with the user during the game | Adhesion failure leads to fluid detection unit shedding |
| F.6 | | Water leakage | a. Fluid detection units short circuit; b. Some or all fluid detection unit fail; c. Task fails | Some fluid detection units are not adhere to the urinal tightly | 
| F.7 | | Erosion | a. Water leakage through fluid detection units causes short circuits | The surface of fluid detection units is eroded |
| F.8 | Data processing subsystem | Signal not received | a. Signal is not processed; c. Task failed | Short circuit; Interface of data processing chips damaged |
| F.9 | | High latency during data processing | b. High latency on displaying the game result; c. Task failed | Short circuit; Interface of data processing chips damaged; Signal transmission is not stable |
| F.10 | | Could not wake up from power saving mode | c. Task failed | System is set to the wrong time; The program set the time wrong |
| F.11 | Game subsystem | Display wrong result | b. The game result is wrong; c. Task failed | Calculation is wrong |
| F.12 | | High latency during the game | b. High latency on displaying the result; c. Task failed | Algorithm of the game is not optimized |
| F.13 | Display subsystem | Display failure | b. Game result is not displayed; c. Task failed | Display is damaged; The format of the input signal is wrong |
| F.14 | | The display mode is not correct | b. Frame displayed is distorted; c. Task failed | Display mode is set wrong; The format of the input signal is wrong |

#### 5. Suggest corrective actions	

After finding out the causes of failures, it's time to look for corrective actions to reduce the chance of malfunctions occur. It's important to consider the timing for corrective actions. The three windows are: during design, manufacture and running. 

| Failure mode index | Identified function or subsystem | Impact (a. local; b. system; c. task) | Possible causes | Corrective actions (a. design; b. manufacture; c. running) |
| --- | --- | --- | --- | --- |
| F.1 | Body detection subsystem | Body detection failure | b. Fail to detect human body or long delay; c. Task failed | Body detection unit damaged | a. add a protection enclosure for the body detection unit; b. use better quality body detector |
| F.2 | Sound detection subsystem | Sound detection failure | b. Fail to detect sound or long delay; c. Task failed | Sound detection unit damaged | a. add a protection enclosure for the sound detection unit; b. use a better sound detector |
| F.3 | | Noise | b. Detect noise or irrelevant sound | Multiple persons make sound near the device | a. add electric filter or decease the detection range; c. active only when less people are nearby |
| F.4 | Fluid detection subsystem | Fluid detection failure | b. Fail to detect fluid or long delay; c. Task failed | Fluid pressure is too low | a. decrease the thickness of the waterproof layer; b. use better fluid detector |
| F.5 | | Fluid detection unit shedding | a. Part of the urinal is not covered by fluid detectors; b. The device fails to interact with the user during the game | Adhesion failure leads to fluid detection unit shedding | b. use better waterproof glue |
| F.6 | | Water leakage | a. Fluid detection units short circuit; b. Some or all fluid detection unit fail; c. Task fails | Some fluid detection units are not adhere to the urinal tightly | b. make sure the waterproof glue is uniformly applied |
| F.7 | | Erosion | a. Water leakage through fluid detection units causes short circuits | The surface of fluid detection units is eroded | b. use corrosion protective waterproof layer |
| F.8 | Data processing subsystem | Signal not received | a. Signal is not processed; c. Task failed | Short circuit; Interface of data processing chips damaged | b. use better wire |
| F.9 | | High latency during data processing | b. High latency on displaying the game result; c. Task failed | Short circuit; Interface of data processing chips damaged; Signal transmission is not stable | b. add extra protection at the interface |
| F.10 | | Could not wake up from power saving mode | c. Task failed | System is set to the wrong time; The program set the time wrong | b. adjust the time during installation; b. add an API so the time can be modified |
| F.11 | Game subsystem | Display wrong result | b. The game result is wrong; c. Task failed | Calculation is wrong | b. make the game simpler |
| F.12 | | High latency during the game | b. High latency on displaying the result; c. Task failed | Algorithm of the game is not optimized | b. optimize the algorithm |
| F.13 | Display subsystem | Display failure | b. Game result is not displayed; c. Task failed | Display is damaged; The format of the input signal is wrong | a. replace the display so it could match the data processing unit; b. use better display connected with waterproof wires |
| F.14 | | The display mode is not correct | b. Frame displayed is distorted; c. Task failed | Display mode is set wrong; The format of the input signal is wrong | b. use the correct format |

Although we have gotten the result of the analysis, it doesn't mean the concerning systems have to be modified. We need to estimate the cost and evaluate the benefit for the action.

#### 6. Rate the severity of impact

Next we need to estimate the probabilities of the failures occur and the damage they may cause. The table below shows the rate of the severity of impact.

| Severity | Description | Explanation |
| --- | --- | --- |
| 1 | None | Functions deviate within the tolerance |
| 2 | Slight | Problems can be fixed during manufacture |
| 3 | Extremely low | Problems can be fixed within 10 minutes |
| 4 | Very low | Problems can be fixed within half an hour |
| 5 | Low | Problems can be fixed within one hour |
| 6 | Medium | Problems can be fixed within 4 hours |
| 7 | High | Problems are not fixable. Part of the device malfunctions |
| 8 | Dangerous (with alarm) | The device can cause injury of the user or prople nearby. Alarm will be triggered in advance |
| 9 | Dangerous (without alarm) | The device can cause injury of the user or prople nearby. Alarm will not be triggered |

#### 7. Rate the likelihood of causal occurrence	

To rate the likelihood of causal occurrence, we use the table below. Here MTTF is mean time between failures. 

| Possibility | Description |
| --- | --- |
| 1 | The failure time is 50 times longer than user required |
| 2 | The failure time is 20 times longer than user required |
| 3 | The failure time is 10 times longer than user required |
| 4 | The failure time is 6 times longer than user required |
| 5 | The failure time is 4 times longer than user required |
| 6 | The failure time is 2 times longer than user required |
| 7 | The failure time is same as user required |
| 8 | The failure time is 60% shorter than user required |
| 9 | The failure time is 30% shorter than user required |
| 10 | The failure time is 10% shorter than user required |

#### 8. Assess the risks	

For a simple project, risks can be analysed using using a two dimensional table, one dimensional corresponds to likelihood; the other corresponds to severity. To assess the risks, simply multiply the values along the two axis gives the risk priority number(RPN), i.e., likelihood * severity = RPN.

![](/Image/Assess%20the%20risks.jpg)

#### 9. Prioritize the action	

The last step is to prioritize the action. It's better to find solutions for risks with high priorities as quickly as possible. It worth to note that some risks may cause severe damage, but it is very unlikely to occur. Therefore, it has a very low RPN. Such ricks should be re-evaluated as derived requirements. 

For our project, the priorities are listed in the table below

| Failure mode index | Identified function or subsystem | Impact (a. local; b. system; c. task) | Possible causes | Corrective actions (a. design; b. manufacture; c. running) | Impact level | Likelihood | Risk factor | Action priority |
| --- | --- | --- | --- | --- | --- | --- | --- | --- |
| F.1 | Body detection subsystem | Body detection failure | b. Fail to detect human body or long delay; c. Task failed | Body detection unit damaged | a. add a protection enclosure for the body detection unit; b. use better quality body detector | 8 | 4 | 32 | Medium |
| F.2 | Sound detection subsystem | Sound detection failure | b. Fail to detect sound or long delay; c. Task failed | Sound detection unit damaged | a. add a protection enclosure for the sound detection unit; b. use a better sound detector | 8 | 4 | 32 | Medium | 
| F.3 | | Noise | b. Detect noise or irrelevant sound | Multiple persons make sound near the device | a. add electric filter or decease the detection range; c. active only when less people are nearby | 3 | 7 | 21 | Low |
| F.4 | Fluid detection subsystem | Fluid detection failure | b. Fail to detect fluid or long delay; c. Task failed | Fluid pressure is too low | a. decrease the thickness of the waterproof layer; b. use better fluid detector | 8 | 4 | 32 | Medium |
| F.5 | | Fluid detection unit shedding | a. Part of the urinal is not covered by fluid detectors; b. The device fails to interact with the user during the game | Adhesion failure leads to fluid detection unit shedding | b. use better waterproof glue | 5 | 7 | 35 | Medium |
| F.6 | | Water leakage | a. Fluid detection units short circuit; b. Some or all fluid detection unit fail; c. Task fails | Some fluid detection units are not adhere to the urinal tightly | b. make sure the waterproof glue is uniformly applied | 8 | 8 | 64 | High |
| F.7 | | Erosion | a. Water leakage through fluid detection units causes short circuits | The surface of fluid detection units is eroded | b. use corrosion protective waterproof layer | 8 | 8 | 64 | High |
| F.8 | Data processing subsystem | Signal not received | a. Signal is not processed; c. Task failed | Short circuit; Interface of data processing chips damaged | b. use better wire | 8 | 4 | 32 | Medium |
| F.9 | | High latency during data processing | b. High latency on displaying the game result; c. Task failed | Short circuit; Interface of data processing chips damaged; Signal transmission is not stable | b. add extra protection at the interface | 2 | 7 | 14 | Very low | 
| F.10 | | Could not wake up from power saving mode | c. Task failed | System is set to the wrong time; The program set the time wrong | b. adjust the time during installation; b. add an API so the time can be modified | 2 | 5 | 10 | Very low |
| F.11 | Game subsystem | Display wrong result | b. The game result is wrong; c. Task failed | Calculation is wrong | b. make the game simpler | 2 | 5 | 10 | Very low |
| F.12 | | High latency during the game | b. High latency on displaying the result; c. Task failed | Algorithm of the game is not optimized | b. optimize the algorithm | 2 | 5 | 10 | Very low |
| F.13 | Display subsystem | Display failure | b. Game result is not displayed; c. Task failed | Display is damaged; The format of the input signal is wrong | a. replace the display so it could match the data processing unit; b. use better display connected with waterproof wires | 8 | 4 | 32 | Medium |
| F.14 | | The display mode is not correct | b. Frame displayed is distorted; c. Task failed | Display mode is set wrong; The format of the input signal is wrong | b. use the correct format | 2 | 5 | 10 | Very low |

# 7. Execute the design	

From now on, we will shift the focus towards project managements. In reality, no matter how perfect the design is, the team will encounter many unexpected obstacles in practice. It's important to have a well organised team that can respond to changes of environment promptly. It's important to develop a systematic view on the changes, based on the interaction between different subjects.

## a) Schedule the project and track progress	
### i. Develop the task list (work breakdown structure)	

The main task of the project manager is to define the project category, and then identify all the tasks to be done within the category. If the estimated cost exceeds the budget, it's necessary to find a way to reduce the cost, or negotiate with the investor to increase the budget. 

Here the first step is to develop a task list for all tasks within the category. Tasks can be decomposed and sorted base on their ranks. 
</br>
![](/Image/Develop_the_task_list.jpg)
</br>
We list all the low rank activities in a new table and give each of them a number.</br>
![](/Image/Develop_the_task_list_2.jpg)
</br>

### ii. Estimate durations	

To work out the schedule, it's necessary to estimate the time for each task. This estimation is based on experience, which can be modified during the action. For our project the estimation is listed in the table below.
</br>
![](/Image/Estimate%20durations.jpg)
</br>
### iii. Task percent complete	

The project manager should follow each task and make sure none of them is overdue. If the project requires collaboration of different teams, leaders of the teams should report to the project manager about their progress. These informations are added in the same table.
</br>
![](/Image/Task%20percent%20complete.jpg)
</br>
### iv. Identify task inputs, outputs, and deliverables	

It's important to be aware of the relation between different tasks. This relation can be presented in a task input-output matrix, which describe the order of design, manufacture and test of all tasks. 

For our project, the matrix is composed of 26 design and manufacture activities, and 14 test activities. For simplicity here we show part of the matrix as an example. The complete matrix can be found in the excel file "task input-output matrix". For example, the A.01 subsystem requirement will define the interfaces, norms and requirements of the body and sound detection subsystems, which should be worked out before purchase. 
</br>
![](/Image/Identify%20task%20inputs,%20outputs,%20and%20deliverables.jpg)
</br>
The summary of the task input-output matrix
</br>
![](/Image/Identify%20task%20inputs,%20outputs,%20and%20deliverables%202.jpg)
</br>
### v. Establish task precedence relationships	

After working out the task input-output matrix, it's easy to generate the establish the task precedence matrix. Each cell marked as "1" in the matrix indicates that the task labelled in the row should be finished prior to that labelled in the column. For our project, only part of the matrix is presented here. The complete matrix can be found in the excel file -- "task precedence matrix".
</br>
![](/Image/Establish%20task%20precedence%20relationships.jpg)
</br>
In the above matrix, some of the cells under the diagonal are labelled as "1", indicating that the order of the tasks should be adjusted. This work can be done by using computer programs. The adjusted tasks are listed in the table below based on their priorities. 
</br>
![](/Image/Establish%20task%20precedence%20relationships%202.jpg)
</br>
### vi. Schedule the project	

The next step is to work out the schedule, which presents the start and end time of each task. 
</br>
![](/Image/Schedule%20the%20project.jpg)
</br>
Note that the start time is assigned as the earliest time the task may be started. For example, the activity A.21 "integrate the body detection system and the data processing system" can be started after the accomplishment of A.04 "test body detection system" and A.14 "test data processing system". Therefore, the start time of A.21 should be the later time between the end times of A.04 and A.14.   

### vii. Display a Gantt chart	

The schedule can be visualized using Gantt chart. Here we use MS Project to produce the Gantt chart. 
</br>
![](/Image/Gantt%20chart%20schedule%20V1.gif)
</br>
Note that many tasks are parallel. Here we do not consider the competition of resources. For example, we only have one data process system. The integration of the data process system with other systems, such as body detection system, sound detection system, liquid detection system, etc, has to be done one by one. Therefore, the schedule should be adjusted according to the availability of resources.

### viii. Adjust the schedule for team availability	

For a small project, adjustment of the schedule can be done by using the test for error method and add delay in the schedule. For big projects, this step can be done by using computer programs. For our project, the result of the adjustment is displayed in the table below.

In the previous MS project table, a column of "Levelling Delay" is added. Next, we need to assign tasks to each team member, based on his/her availability. 
</br>
![](/Image/Gantt%20chart%20schedule%20_%20delay%20V1.gif)
</br>
Team members are added in the Gantt chart. We should go through each member and check if there is any time conflict between different tasks. If yes, a delay should be added in schedule. 
</br>
![](/Image/Adjust%20the%20schedule%20for%20team%20availability.jpg)
![](/Image/Adjust%20the%20schedule%20for%20team%20availability%202.jpg)
</br>
Fill each team member into the Gantt chart, and adjust the order, focusing on tasks assigned to the same employee. At the same time, check whether there are two or more tasks requiring to start at same time, then introduce delay time.
</br>
![](/Image/Gantt%20chart%20schedule%20_%20delay_team%20member%20V1.gif)
</br>
## b) Conduct management reviews	

By conducting management reviews, we can check if the project progresses according to the schedule. In this step, all the team leaders should report to the project manager. For efficiency, normally the report is presented in one A4 paper, which contains the following contents:

- achievements; works have been done since last review
- plan; works should be done before next review
- metric; a practical and objective way to evaluate the result
- obstacles; problems the teams encountered, which may cause delay or cost exceeds budget

For our project, the result is presented in the table below
</br>
![](/Image/Conduct%20management%20reviews.jpg)
</br>
During the review, based on the information from all the team leaders, the project manager should judge the situation and draw following conclusions if necessary,

- stop the project. If the target is not reachable, stop the project may save cost
- allocate more resources. This may help the project progress faster
- modify the target or the requirements. If the cost is too high, it's better to negotiate with the customer and see if it's possible to reduce the quality or cut some functions, and therefore reduce the total cost

# 8. Iterate the design process	

## a) Iterate until feasible	

All the above mentioned steps are in the same mode, from one start point, going through all the analysis steps, and reach the end. However, when errors occur during the development process, or it turns out that the design cannot satisfy all the requirements, or some components fail the tests, it's necessary to backtrack and iterate the design process.

### i. Backtracking strategies	

- terminate or modify the project
- modify the requirements, narrow down the project, or increase the investment
- lower the exit standards. If some modules cannot pass the test, it might be OK to consider to lower the standard for acceptance 
- improve the quality of the related components or subsystems. Sometimes it is due to the quality, not the design.
- adjust the parameters. Maybe the design is viable, but the parameters are far from optimized. 
- backtrack to the selection phase, try the second solution, evaluate the viability. 
- backtrack to the concept category tree and look for other possible solutions. 
- merge functions. Sometimes extending functions of one component may make other components with similar functions redundant. 
- describe functions or problems more abstractly. Maybe there are too much restrictions on descriptions. Redefining them during the abstraction may be helpful for finding new solutions. 
- add new functions, tasks or parameters. Maybe the current design does not have enough freedom to satisfy all the requirements. Adding new sub-functions may provide more design freedom.
 
For our project, the backtracking strategy is shown in the table below
</br>
![](/Image/Backtracking%20strategies.jpg)
</br>
## b) Iterate with improvement	

This document follows the procedure described in the book -- Getting Design Right, which combines the constantly improving concept in quality management with system engineering. Among the eight steps we mentioned above, the first six steps (define, measure, explore, optimize, develop, validate) are corresponding to three steps (plan, perform and check) in quality management. Data collected during validation in one iteration can be used during measurement in the next iteration. In this case, the last two steps (execute and iterate) are corresponding to the action step in quality management. 

Not all iterations result successful. It's important to learn and improve during each iteration. 

- tailor the procedure. Before starting to iterate, it's important to have a clear idea on the fundamental of the design, the actions to be taken, how far you should go along the path etc.
- develop standards for effectiveness measurements and competitions. 
- track the performance, be clear about the time consuming activities, have a better estimation on timing. 
- collect feedback, communication with each team, discuss the result of the iteration, weigh the pros and cons, improve the performance. 

## c) Iterate by level	

Iteration by level is in the nested form, which is different from the previous analysis. 

### i. Level-by-level decomposition: the Vee diagram	

According to system engineering, we describe a system through its context, behaviour and subsystems. The whole system is decomposed into many subsystems, which can be divided again and again, forms V shape design procedure -- the system engineering procedure. The above mentioned eight steps are applied to different levels. 
</br>
![](/Image/Level%20by%20level%20decomposition%20the%20Vee%20diagram.jpg)
</br>
The left side of the V-model focus on the sort out all the requirements, identify subsystems, specify their functions, work out performance requirements, setup standards for interfaces. The design-manufacture at the bottom of the V-model relates to many different subjects. The final solution should be worked out by experts in the field. It should satisfy all the requirements. The right side of the V-model is focus on the design, which starts from the verification of whether all the components satisfy their requirements. After testing all the components, the next step will be the integration and verification of all subsystems. The last step is the integration and verification of the whole system, which eventually will be tested by the market and costumers. 

During the process, we should pay attention to the following three aspects, detail functions into behaviours; allocate non-behavioural requirements; maintain hierarchies and traceabilities. 

#### 1. Detail functions into behaviours	

Similar to the procedure discussed in chapter 5, use case behaviours can be described through functions realized by corresponding subsystems. Running description template can be used for describing behaviour, subsystem function responsibility and interface requirement. 

According to the system engineering procedure, functions should be assigned to low level subsystems. The procedure should be iterated until enough evidence suggests the subsystems can be designed, manufactured and tested. 

#### 2. Allocate non-behavioural requirements: linked houses of quality	

Just like the behavioural requirements, non-behavioural requirements should be allocated on subsystems as well. Some engineering characteristics, such as weight, should be allocated on every subsystem levels; other engineering characteristics, such as velocity, should be presented on the interactions between different subsystems. The process of allocation is preformed by connecting related quality houses. 
</br>
![](/Image/Level%20by%20level%20decomposition%20the%20Vee%20diagram%202.jpg)
</br>
Here we only show three levels of quality house. Ideally it should be applied on every subsystem level, and every procedure, such as manufacture, installation, running, uninstallation etc.

#### 3. Maintain hierarchies and traceabilities	

Previously we have used simple templates to illustrate systems and their relations. For a more complicated system, it's necessary to keep track of the data, such as,

- requirement traceability (trace the requirements in different system levels)
- material manifest (including subsystem, components, module etc)
- from behaviour to function and vice versa
- the physical relation between subsystems
- data and data stream
- test plan
- decomposed work structure
- work schedule

Listed above are mostly datum with level structures. For example, through the material manifest we can find out a component belongs to which module in which subsystem. 

## d) Dive and surface: a system view	

Dive is to analyse the questions in details, while surface is to summarize those details. During surface, we should focus on analysing the questions and environments in the system level. To determine the viability of the analysis, we should switch to dive and be more specific. The following table is used for the analysis.
</br>
![](/Image/Dive%20and%20surface%20a%20system%20view.jpg)
</br>
### Appendix 1 IBM Rational Rhapsody - Design black box system model
The system sequence diagram drawn by IBM Rational Rhapsody.</br>
![](/Image/10%20SequenceDiagram_Blackbox.jpg)
</br>
The system state diagram drawn by IBM Rational Rhapsody.</br>
![](/Image/11%20StateDiagram_Blackbox.jpg)
</br>
### Appendix 2 IBM Rational Rhapsody - Design white box system model
The white-box sequence diagram drawn by IBM Rational Rhapsody, based on the previously drawn black-box system model.</br>
![](/Image/12%20SequenceDiagram_Whitebox.jpg)
</br>
White-box BDD (Block Definition Diagram).</br>
![](/Image/13%20BDD_Whitebox.jpg)
</br>
White-box IBD (Internal Block Diagram).</br>
![](/Image/14%20IBD.jpg)
</br>
The code framework generated after the model execution is completed.</br>
![](/Image/15%20Code.jpg)</br>
